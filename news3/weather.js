/*! updated; 05-06-2019 11:55 AM **/


Modulr.define("core.base:modules/weather",["require","jquery","utils/akamai"],function(require,$){var Location=require("utils/akamai").geo;return new function(){var container=$(".site-header .weather"),WEATHER_FEED_LOCAL=!1,Proto=this;Proto.getFeedURL=function(){var zipCode=$.cookie("FXN_w_locinfo")||Location.zipRange;WEATHER_FEED_LOCAL=!!/^([0-9]){5}.*$/.test(zipCode)&&(zipCode=zipCode.substring(0,5),zipCode="/feeds/web/weather/details/zip/{zipCode}.json".replace("{zipCode}",zipCode))},Proto.getWeatherDetails=function(callback){var preferences={url:(/foxnews.com$/.test(window.location.hostname)?"//www.foxnews.com":"")+WEATHER_FEED_LOCAL,data:{cb:function(freq){freq=freq||2;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseFloat(freq)).toString():"")}(2)},dataType:"jsonp",async:!0};$.ajax(preferences).done(function(data){data&&data.weatherData&&callback&&"function"==typeof callback&&callback({city:data.weatherData.cityName,state:data.weatherData.stateShort,forecast:data.weatherData.forecast,temp:data.weatherData.currentTemp})})},Proto.init=function(){0<container.length&&(Proto.getFeedURL(),WEATHER_FEED_LOCAL&&Proto.getWeatherDetails(function(response){container.find(".location").text(response.city+", "+response.state),container.find(".condition").text(response.forecast),container.find(".temp").text(response.temp+"Â°")}))}}});