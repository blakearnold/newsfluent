function AkaHTML5MediaAnalytics(cF){var b1="3.15.2";var bP=document.currentScript;var m=null;var am=null;var a8=true;var x=null;var bX=null;var dg=false;var ar=null;var cQ=null;var aK=null;var de=false;var dp="http://media-analytics.akamaized.net";var c0=null;var cZ=new Date().getTime();var bG=[];bG.push({api:"originUrl",value:location.protocol+"//"+location.hostname});var a5=false;var aB=this;if(cF){if(cF.loaderName){x=cF.loaderName}if(cF.loaderVersion){bX=cF.loaderVersion}}if(bP){m=bP.src}else{bQ("Should be Internet Explorer")}function K(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}function dq(){return(K()+K()+"-"+K()+"-"+K()+"-"+K()+"-"+K()+K()+K())}var bI=bI||function(dy,dw){var dz={},dB=dz.lib={},ds=dB.Base=function(){function dD(){}return{extend:function(dE){dD.prototype=this;var dF=new dD;dE&&dF.mixIn(dE);dF.$super=this;return dF},create:function(){var dE=this.extend();dE.init.apply(dE,arguments);return dE},init:function(){},mixIn:function(dE){for(var dF in dE){dE.hasOwnProperty(dF)&&(this[dF]=dE[dF])}dE.hasOwnProperty("toString")&&(this.toString=dE.toString)},clone:function(){return this.$super.extend(this)}}}(),dt=dB.WordArray=ds.extend({init:function(dD,dE){dD=this.words=dD||[];this.sigBytes=dE!=dw?dE:4*dD.length},toString:function(dD){return(dD||dA).stringify(this)},concat:function(dE){var dF=this.words,dH=dE.words,dG=this.sigBytes,dE=dE.sigBytes;this.clamp();if(dG%4){for(var dD=0;dD<dE;dD++){dF[dG+dD>>>2]|=(dH[dD>>>2]>>>24-8*(dD%4)&255)<<24-8*((dG+dD)%4)}}else{if(65535<dH.length){for(dD=0;dD<dE;dD+=4){dF[dG+dD>>>2]=dH[dD>>>2]}}else{dF.push.apply(dF,dH)}}this.sigBytes+=dE;return this},clamp:function(){var dD=this.words,dE=this.sigBytes;dD[dE>>>2]&=4294967295<<32-8*(dE%4);dD.length=dy.ceil(dE/4)},clone:function(){var dD=ds.clone.call(this);dD.words=this.words.slice(0);return dD},random:function(dD){for(var dE=[],dF=0;dF<dD;dF+=4){dE.push(4294967296*dy.random()|0)}return dt.create(dE,dD)}}),e=dz.enc={},dA=e.Hex={stringify:function(dE){for(var dF=dE.words,dE=dE.sigBytes,dH=[],dD=0;dD<dE;dD++){var dG=dF[dD>>>2]>>>24-8*(dD%4)&255;dH.push((dG>>>4).toString(16));dH.push((dG&15).toString(16))}return dH.join("")},parse:function(dE){for(var dF=dE.length,dG=[],dD=0;dD<dF;dD+=2){dG[dD>>>3]|=parseInt(dE.substr(dD,2),16)<<24-4*(dD%8)}return dt.create(dG,dF/2)}},dv=e.Latin1={stringify:function(dE){for(var dF=dE.words,dE=dE.sigBytes,dD=[],dG=0;dG<dE;dG++){dD.push(String.fromCharCode(dF[dG>>>2]>>>24-8*(dG%4)&255))}return dD.join("")},parse:function(dE){for(var dD=dE.length,dG=[],dF=0;dF<dD;dF++){dG[dF>>>2]|=(dE.charCodeAt(dF)&255)<<24-8*(dF%4)}return dt.create(dG,dD)}},du=e.Utf8={stringify:function(dE){try{return decodeURIComponent(escape(dv.stringify(dE)))}catch(dD){throw Error("Malformed UTF-8 data")}},parse:function(dD){return dv.parse(unescape(encodeURIComponent(dD)))}},dx=dB.BufferedBlockAlgorithm=ds.extend({reset:function(){this._data=dt.create();this._nDataBytes=0},_append:function(dD){"string"==typeof dD&&(dD=du.parse(dD));this._data.concat(dD);this._nDataBytes+=dD.sigBytes},_process:function(dE){var dD=this._data,dJ=dD.words,dI=dD.sigBytes,dF=this.blockSize,dG=dI/(4*dF),dG=dE?dy.ceil(dG):dy.max((dG|0)-this._minBufferSize,0),dE=dG*dF,dI=dy.min(4*dE,dI);if(dE){for(var dH=0;dH<dE;dH+=dF){this._doProcessBlock(dJ,dH)}dH=dJ.splice(0,dE);dD.sigBytes-=dI}return dt.create(dH,dI)},clone:function(){var dD=ds.clone.call(this);dD._data=this._data.clone();return dD},_minBufferSize:0});dB.Hasher=dx.extend({init:function(){this.reset()},reset:function(){dx.reset.call(this);this._doReset()},update:function(dD){this._append(dD);this._process();return this},finalize:function(dD){dD&&this._append(dD);this._doFinalize();return this._hash},clone:function(){var dD=dx.clone.call(this);dD._hash=this._hash.clone();return dD},blockSize:16,_createHelper:function(dD){return function(dE,dF){return dD.create(dF).finalize(dE)}},_createHmacHelper:function(dD){return function(dE,dF){return dC.HMAC.create(dD,dF).finalize(dE)}}});var dC=dz.algo={};return dz}(Math);(function(){var du=bI,dt=du.lib,dv=dt.WordArray,dt=dt.Hasher,ds=[],e=du.algo.SHA1=dt.extend({_doReset:function(){this._hash=dv.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(dB,dw){for(var dD=this._hash.words,dy=dD[0],dx=dD[1],dz=dD[2],dA=dD[3],dF=dD[4],dC=0;80>dC;dC++){if(16>dC){ds[dC]=dB[dw+dC]|0}else{var dE=ds[dC-3]^ds[dC-8]^ds[dC-14]^ds[dC-16];ds[dC]=dE<<1|dE>>>31}dE=(dy<<5|dy>>>27)+dF+ds[dC];dE=20>dC?dE+((dx&dz|~dx&dA)+1518500249):40>dC?dE+((dx^dz^dA)+1859775393):60>dC?dE+((dx&dz|dx&dA|dz&dA)-1894007588):dE+((dx^dz^dA)-899497514);dF=dA;dA=dz;dz=dx<<30|dx>>>2;dx=dy;dy=dE}dD[0]=dD[0]+dy|0;dD[1]=dD[1]+dx|0;dD[2]=dD[2]+dz|0;dD[3]=dD[3]+dA|0;dD[4]=dD[4]+dF|0},_doFinalize:function(){var dw=this._data,dy=dw.words,dz=8*this._nDataBytes,dx=8*dw.sigBytes;dy[dx>>>5]|=128<<24-dx%32;dy[(dx+64>>>9<<4)+15]=dz;dw.sigBytes=4*dy.length;this._process()}});du.SHA1=dt._createHelper(e);du.HmacSHA1=dt._createHmacHelper(e)})();(function(){var ds=bI,e=ds.enc.Utf8;ds.algo.HMAC=ds.lib.Base.extend({init:function(dz,dB){dz=this._hasher=dz.create();"string"==typeof dB&&(dB=e.parse(dB));var dy=dz.blockSize,du=4*dy;dB.sigBytes>du&&(dB=dz.finalize(dB));for(var dt=this._oKey=dB.clone(),dA=this._iKey=dB.clone(),dw=dt.words,dv=dA.words,dx=0;dx<dy;dx++){dw[dx]^=1549556828,dv[dx]^=909522486}dt.sigBytes=dA.sigBytes=du;this.reset()},reset:function(){var dt=this._hasher;dt.reset();dt.update(this._iKey)},update:function(dt){this._hasher.update(dt);return this},finalize:function(du){var dt=this._hasher,du=dt.finalize(du);dt.reset();return dt.finalize(this._oKey.clone().concat(du))}})})();(function(){var dv=bI,du=dv.lib,dw=du.Base,ds=du.WordArray,du=dv.algo,e=du.HMAC,dt=du.PBKDF2=dw.extend({cfg:dw.extend({keySize:4,hasher:du.SHA1,iterations:1}),init:function(dx){this.cfg=this.cfg.extend(dx)},compute:function(dF,dH){for(var dE=this.cfg,dB=e.create(dE.hasher,dF),dD=ds.create(),dC=ds.create([1]),dJ=dD.words,dG=dC.words,dI=dE.keySize,dE=dE.iterations;dJ.length<dI;){var dA=dB.update(dH).finalize(dC);dB.reset();for(var dy=dA.words,dL=dy.length,dx=dA,dM=1;dM<dE;dM++){dx=dB.finalize(dx);dB.reset();for(var dK=dx.words,dz=0;dz<dL;dz++){dy[dz]^=dK[dz]}}dD.concat(dA);dG[0]++}dD.sigBytes=4*dI;return dD}});dv.PBKDF2=function(dx,dz,dy){return dt.create(dy).compute(dx,dz)}})();function ci(dz,dw){if(dz==null||dz==""){return}var du=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;try{var dt=du.exec(dz);if(typeof dt[1]==="undefined"){dw.protocol=location.protocol}else{dw.protocol=dt[1]}dw.hostName=dt[2];dw.port=dt[3]?dt[3]:"80";dw.path=dt[4];var dy=dw.path.split("/");var dv=dy.length;dw.streamName=dy[dv-1];var ds=dw.streamName.toLowerCase();if((ds.indexOf(".m3u")!=-1)||(ds.indexOf("manifest")!=-1)||(ds.indexOf(".f4m")!=-1)||(ds.indexOf(".mpd")!=-1)){if(dv>=3){dw.streamName=dy[dv-2]+"/"+dy[dv-1]}}dw.hash=dt[5]?dt[5]:"";dw.search=dt[6]?dt[6]:"";dw.host=dw.hostName+":"+dw.port}catch(dx){bQ("Exception,  parseStreamUrl :"+dx)}}function cb(e,ds){var dt;if(e!=null){dt=e}else{dt=new Date().getTime()}return dt}function ah(e){var ds=cb(e);return(ds-cZ)}var aa=false;if(window){try{aa=window.XDomainRequest?true:false}catch(ch){aa=false}}var bk={};var Z={};var bz=null;var cs={eventCode:"",beaconId:"",sequenceId:"",logType:"",endOfStream:"",logVersion:"",formatVersion:"",visitId:"",errorCode:"",partNumber:"",totalParts:"",hostName:"",streamName:"",port:"",protocol:"",userAgent:"",playerType:"",os:"",format:"",connectTime:"",bufferingTime:"",startupTime:"",streamLength:"",bytesTotal:"",browser:"",browserSize:"",videoSize:"",streamUrl:"",deliveryType:"",pluginVersion:"",beaconVersion:"",serverIp:"",playerFormat:"",outlierStartupTime:"",isFirstTitle:"",rebufferSessionH:"",sequenceIdH:"",isSessionWithRebufferH:"",playerState:"",currentStreamTime:"",currentClockTime:"",playClockTime:"",playStreamTime:"",rebufferCount:"",rebufferTime:"",pauseCount:"",pauseDuration:"",pauseIntervalsAsString:"",seekCount:"",seekTime:"",seekIntervalsAsString:"",pauseSeekSession:"",resumeBufferCount:"",resumeBufferTime:"",isView:"",isSessionWithRebuffer:"",logInterval:"",rebufferSession:"",socialSharing:"",endReasonCode:"",totalPlayClockTime:"",totalPlayStreamTime:"",totalRebufferCount:"",totalRebufferTime:"",totalAdPlayClockTime:"",totalAdStartCount:"",totalAdAbandonCount:"",lastHTime:"",isVisitStart:"",isVisitEnd:"",visitAttempts:"",visitPlays:"",visitViews:"",visitErrors:"",visitInterval:"",visitPlayClockTime:"",visitPlayStreamTime:"",visitRebufferCount:"",visitRebufferTime:"",visitStartupErrors:"",visitAdPlayClockTime:"",visitAdStartCount:"",visitAdAbandonCount:"",visitUniqueTitles:"",adAbandonCount:"",adPauseTime:"",adStartupTime:"",adPlayClockTime:"",adCount:"",adSession:"",sessionId:"",attemptId:"",playerReferrer:"",ais_idpId:"",ais_idpName:"",ais_idpDisplayName:"",ais_idpUrl:"",ais_queryToken:"",ais_aisuid:"",qualityOfExperience:"",transitionStreamTimeSession:"",transitionUpSwitchCount:"",transitionDownSwitchCount:"",averagedBitRate:"",fullOs:"",longitude:"",latitude:"",connectivity:""};var cB={title:false,category:false,subCategory:false,show:false,contentLength:false,contentType:false,device:false,deliveryType:false,playerId:false,eventName:false};var aJ={};var cr={};aJ.isBrightcoveVideo=false;aJ.objectBased=false;aJ.videoPassed=false;var ap=false;var R=false;var aX=false;var aG={};var bW={};var cJ=false;var c3=[];var bp={timer:null,queue:[],browserClose:false,enabled:true,time:250};var bJ={};var bD=[];var a0={};var bV={};var p={};p.seekThreshold=2000;p.visitTimeout=60*60*1000;var aR={};var cA={};var an={};var b9={};var M=100;var cG={};var af=false;var bU=false;var c={fastTCPFailed:false,fastTCPEnabled:false};var cE=[];var bA={};bA.dataSent={};var cg=1;var aP=-1;var s=null;var cq={};var A=[];var O={pageURLCsmaDebug:0,configURLCsmaDebug:0,configDebug:0,windowOpened:false,logStoredMsg:true,printException:false};function at(){this.aisRetries=0;this.aisRequestLimit=3;this.aisRequestInterval=30000;this.requestFailed=false}var cf=new at();var E={setDataArr:["adId","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"],clearAdAnalytics:function(){this.isAdLoaded=false;this.isAdStarted=false;this.id="";this.type="0";this.startPos="0";this.playBucket="-1";this.endStatus="2";this.adLoadTime=null;this.adStartTime=null;this.adStartupTime="0";for(var e=0;e<this.setDataArr.length;e++){this[this.setDataArr[e]]=""}}};var cn={bitRateArr:[],currentBitRate:"-",currentStartPos:0,bitRateCount:{},bitRatePlayTime:{},bitRateBucketMap:{},clearBitRate:function(){this.bitRateArr=[];this.currentBitRate="-";this.bitRateCount={};this.bitRatePlayTime={}},updateBitRateArr:function(dt){if(this.bitRateArr.length>0){var e=this.bitRateArr.length;var ds=cn.bitRateArr[e-1];if((this.currentBitRate==ds.bitRate)){ds.playTime+=dt}else{this.pushInBitRateArr(dt,this.currentBitRate,this.currentStartPos)}}else{this.pushInBitRateArr(dt,this.currentBitRate,this.currentStartPos)}},pushInBitRateArr:function(dt,e,ds){this.bitRateArr.push({bitRate:e,playTime:dt,startPos:ds})},populateBitRateBucketMap:function(e,dw){var dt,du=false;var ds=b9.bitRateBucketTimes;if(e!="-"&&e!==""){e=parseInt(e/1000)}for(var dv in ds){du=false;dt=ds[dv];if(e=="-"||e===""||e<0){if(!dt.max&&!dt.min){du=true;break}}else{if(dt.max&&dt.min){if(e>=dt.min&&e<dt.max){du=true;break}}else{if(dt.max){if(e<dt.max){du=true;break}}else{if(dt.min){if(e>=dt.min){du=true;break}}}}}}if(du){this.bitRateBucketMap[dv]+=dw}},findMaxPersistentBitRate:function(){try{if(this.bitRatePlayTime){var ds=0,dt=-1;for(var du in this.bitRatePlayTime){if(this.bitRatePlayTime[du]>dt){dt=this.bitRatePlayTime[du];ds=du}}if(ds!==0){return ds}}}catch(dv){bQ("Exception, find max persistent bit rate")}},getTransitionSession:function(dy){try{var du=null;var dt,dC,dv="";var dw=0,dz,dB=0,ds=0;var dx=true;if(this.bitRateArr.length>0){dt=this.bitRateArr[0];if(dt.bitRate=="-"){dx=false;if(this.bitRateArr[1]&&this.bitRateArr[1].bitRate!="-"){dx=true;this.bitRateArr[1].startPos=this.bitRateArr[0].startPos;this.bitRateArr[1].playTime+=this.bitRateArr[0].playTime;this.bitRateArr.shift()}}}for(dC in this.bitRateBucketMap){this.bitRateBucketMap[dC]=0}for(dw=0;dw<this.bitRateArr.length;dw++){dt=this.bitRateArr[dw];if(dt.bitRate in this.bitRateCount){if(dw!=0){this.bitRateCount[dt.bitRate]++}}else{this.bitRateCount[dt.bitRate]=1}if(dt.bitRate!=""&&dt.bitRate!="-"){if(dt.bitRate in this.bitRatePlayTime){this.bitRatePlayTime[dt.bitRate]+=dt.playTime}else{this.bitRatePlayTime[dt.bitRate]=dt.playTime}}dz=this.bitRateCount[dt.bitRate];if(du){du+=","+dt.bitRate+":"+dt.startPos+":"+dt.playTime+"::"+dz}else{du=dt.bitRate+":"+dt.startPos+":"+dt.playTime+"::"+dz}this.populateBitRateBucketMap(dt.bitRate,dt.playTime);try{if(dx){dB+=dt.bitRate*dt.playTime;ds+=dt.playTime}}catch(dA){}}dy.maxPersistentBitRate=this.findMaxPersistentBitRate();dy.transitionStreamTimeSession=du;for(dC in this.bitRateBucketMap){if(dv){dv+=","+dC+":"+this.bitRateBucketMap[dC]}else{dv=dC+":"+this.bitRateBucketMap[dC]}}dy.bitRateBucketTimes=dv;try{if(dx&&ds&&ds!=0){dy.averagedBitRate=dB+":"+ds}else{dy.averagedBitRate=null}}catch(dA){}}catch(dA){bQ("Exception, get transition Session :"+dA)}}};amaURLUtility=function(){};amaURLUtility.isURL=function(e){var ds=new RegExp("((http|https)(://))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(/{1}[a-zA-Z0-9]+)*/?","i");if(!ds.test(e)){return false}return true};amaURLUtility.parseURLComponents=function(dv){var dt={};var dw=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;try{var du=dw.exec(dv);if(typeof du[1]==="undefined"){dt.protocol=location.protocol}else{dt.protocol=du[1]}dt.hostName=du[2];dt.port=du[3]?du[3]:"80";dt.path=du[4];var dz=this.path.split("/");var dx=dz.length;dt.name=dz[dx-1];var ds=dt.name.toLowerCase();if((ds.indexOf(".m3u")!=-1)||(ds.indexOf("manifest")!=-1)||(ds.indexOf(".f4m")!=-1)||(ds.indexOf(".mpd")!=-1)){if(dx>=3){dt.name=dz[dx-2]+"/"+dz[dx-1]}}dt.hash=du[5]?du[5]:"";dt.search=du[6]?du[6]:"";dt.host=dt.hostName+":"+dt.port}catch(dy){bQ("Exception,  parseStreamUrl :"+dy)}return dt};streamError={InvalidURL:"URL is not valid",ParsingFailed:"Failed to parse stream URL",Invalid_Manifest:"Invalid manifest received",Invalid_Stream:"Stream is not valid",NoError:"success"};streamInfoBase=function(e,ds){this.url=e;this.name=null;this.length=0;this.format=null;this.deliveryType="O";this.isValid=false;this.streamType=null;this.callback=ds};streamInfoBase.prototype.getStreamURL=function(){return this.url};streamInfoBase.prototype.getStreamName=function(){return this.name};streamInfoBase.prototype.getStreamLength=function(){return this.length};streamInfoBase.prototype.getStreamFormat=function(){return this.format};streamInfoBase.prototype.getDeliveryType=function(){return this.deliveryType};streamInfoBase.prototype.getStreamType=function(){return this.streamType};streamInfoBase.prototype.getCallback=function(){return this.callback};streamInfoBase.prototype.parseURL=function(){var du=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;try{var dt=du.exec(this.url);if(typeof dt[1]==="undefined"){this.protocol=location.protocol}else{this.protocol=dt[1]}this.hostName=dt[2];this.port=dt[3]?dt[3]:"80";this.path=dt[4];var dx=this.path.split("/");var dv=dx.length;this.name=dx[dv-1];var ds=this.name.toLowerCase();if((ds.indexOf(".m3u")!=-1)||(ds.indexOf("manifest")!=-1)||(ds.indexOf(".f4m")!=-1)||(ds.indexOf(".mpd")!=-1)){if(dv>=3){this.name=dx[dv-2]+"/"+dx[dv-1]}}this.hash=dt[5]?dt[5]:"";this.search=dt[6]?dt[6]:"";this.host=this.hostName+":"+this.port}catch(dw){bQ("Exception,  parseStreamUrl :"+dw)}};var f=function(du,dv,dt,ds){try{du.prototype=Object.create(dv.prototype,{url:{value:dt,enumerable:false},callback:{value:ds,enumerable:false}})}catch(dw){bQ("Exception thrown from InheritObject"+dw)}};hlsStreamInfo=function(ds,dt){this.recursiveDownload=false;this.isParsed=false;this.parse=function(dF){try{if(!dF){return streamError.InvalidURL}if(dF.search("#EXTM3U")===-1){return streamError.ParsingFailed}this.streamType="hls";this.format="L";this.parseURL();var dH=dF.split("\n");var dw="";var dJ=/PROGRAM-ID=(\d+)/;var dD,dC;if(dH){for(dC=0;dC<dH.length;dC++){if((dD=dJ.exec(dH[dC]))){if(dD[1]==dw){break}else{dw=dD[1]}}}if(dC!=dH.length){this.format="L"}}var dv=this.getStreamURL();var dI,du,dz,dK;if(dv){var dx=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;var dy=dx.exec(dv);if(typeof dy[1]==="undefined"){dI=location.protocol}else{dI=dy[1]}du=dy[2];dz=dy[3]?dy[3]:"80";dK=dy[4]}dJ=/^#EXT((INF)|(-X-STREAM-INF))[^\n]*\n([^\n]*)\n/m;bQ("Checking");if((dD=dJ.exec(dF))){bQ("Checking done "+dD[4]);var dG=new RegExp(".m3u8");if(dG.exec(dD[4])&&dI&&du){try{this.recursiveDownload=true;var dA=new XMLHttpRequest();var dB;if(!amaURLUtility.isURL(dD[4])){dB=dI+"//"+du+dD[4]}else{dB=dD[4]}bQ("Requesting URL = "+dB);dA.open("GET",dB,true);dA.onreadystatechange=function(dL){return function(){bQ("current content type from stream url is = "+this.getResponseHeader("content-type"));if(this.readyState===4){if(this.status===200&&this.responseText){if(/^#EXT-X-ENDLIST/m.exec(this.responseText)){dL.deliveryType="O"}else{dL.deliveryType="L";dL.length="-1"}}if(dL.getCallback()){dL.getCallback()(dL)}}}}(this);if(dA.overrideMimeType){dA.overrideMimeType("text/plain")}}catch(dE){bQ("parse, Exception,  parsing play list, "+dE)}}else{if(/^#EXT-X-ENDLIST/m.exec(dF)){this.deliveryType="O"}}}}catch(dE){bQ("Exception,  parse : "+dE)}this.isParsed=true;return streamError.NoError};var e=this.parse(ds);if(e===streamError.NoError){if(this.recursiveDownload===false){this.getCallback()(this)}this.streamType="hls";this.deliveryType="O";return this}else{if(dt){this.streamType="hls";this.format="L";this.deliveryType="O";this.length=0;this.parseURL();this.getCallback()(this);return this}else{}}};dashStreamInfo=function(dt,dv){this.isParsed=false;try{this.parse=function(dA){if(!dA){return streamError.InvalidURL}this.parseURL();this.format="Dash";this.streamType="dash";var dx=new DOMParser();var dH=dx.parseFromString(dA,"text/xml");if(!dH){return streamError.ParsingFailed}var dE=dH.getElementsByTagName("MPD");if(!dE||!dE[0]){return streamError.ParsingFailed}var dD=dE[0].getAttribute("type");if(dD==="dynamic"){this.deliveryType="L";this.length=0}else{this.deliveryType="O";var e=dE[0].getAttribute("mediaPresentationDuration").replace("PT","");var dB=e.search("H");var dF=0;this.length=0;if(dB!==-1){var dz=Number(e.substring(0,dB));if(!isNaN(dz)){this.length+=dz*60*60*1000;dF=dB+1}}var dy=e.search("M");if(dy!==-1){var dw=Number(e.substring(dF,dy));if(!isNaN(dw)){this.length+=dw*60*1000;dF=dy+1}}var dC=e.search("S");if(dC!==-1){var dG=Number(e.substring(dF,dC));if(!isNaN(dG)){this.length+=dG*1000}}bQ("Current stream length = "+this.length)}this.getCallback()(this);this.isParsed=true;return streamError.NoError}}catch(du){bQ("Exception thrown from dashStreamInfo "+du)}var ds=this.parse(dt);if(ds===streamError.NoError){return this}else{if(dv){this.format="Dash";this.streamType="dash";this.deliveryType="O";this.length=0;this.parseURL();this.getCallback()(this);return this}else{}}};nonAdaptiveStream=function(ds,du){try{this.format="P";this.deliveryType="O";this.streamType="nonAdaptiveStream";this.length=0;this.parseURL();this.getCallback()(this);return this}catch(dt){bQ("Exception thrown from nonAdaptiveStream"+dt)}};var cY={};cY.FactoryWithURL=function(du,ds,dt){var dv;try{var dx=new XMLHttpRequest();dx.open("GET",ds,true);dx.onreadystatechange=function(){if(this.readyState===4&&this.status===200&&this.responseText){dv=cY.FactoryWithContent(du,ds,this.responseText,dt,false)}else{}};dx.send(null)}catch(dw){bQ("Exception thrown from streamFactory.FactoryWithURL"+dw)}};cY.FactoryWithContent=function(dw,ds,dv,dB,dA){function dy(){f(hlsStreamInfo,streamInfoBase,ds,dB);return new hlsStreamInfo(dv,dA)}function dz(){f(dashStreamInfo,streamInfoBase,ds,dB);return new dashStreamInfo(dv,dA)}function dx(){f(nonAdaptiveStream,streamInfoBase,ds,dB);return new nonAdaptiveStream(dv,dA)}var dt;try{if("hls"===dw){dt=dy()}else{if("dash"===dw){dt=dz()}else{dt=dx()}}}catch(du){bQ("Exception thrown from streamFactory.FactoryWithContent "+du)}return dt};StreamTypeDetector=function(du,dt,dw,dA){function ds(e,dC,dB){bQ(("Mime type method didn't work. Lets apply parsers one after another - Brute force"));var dD=cY.FactoryWithContent("hls",e,dC,dB,false);if(!dD.isParsed){bQ("not a HLS stream");dD=cY.FactoryWithContent("dash",e,dC,dB,false);if(!dD.isParsed){bQ("not Dash either... Assuming Progressive download");dD=cY.FactoryWithContent("nonAdaptive",e,dC,dB,false)}}}try{if(!du||du===""){return streamError.Invalid_Stream}var dy=RegExp(".m3u8");var dz=RegExp(".mpd");if(dw){if(dy.exec(du)){bQ("Found m3u8 as an extension");cY.FactoryWithURL("hls",du,dA);return}else{if(dz.exec(du)){bQ("Found mpd as an extension");cY.FactoryWithURL("dash",du,dA);return}else{bQ("Couldn't find either m3u8 or Dash will try mime type");var dv=new XMLHttpRequest();bQ("To get mime type trying HEAD request");dv.open("HEAD",dv,true);if(dv.overrideMimeType){dv.overrideMimeType("text/xml")}dv.onreadystatechange=function(){if(this.readyState===this.DONE){var dB=this.getResponseHeader("content-type");var e=null;if("application/x-mpegURL"===dB||"vnd.apple.mpegURL"===dB){bQ("Rceived mime type is m3u8");e=cY.FactoryWithContent("hls",du,this.responseText,dA)}else{if("application/dash+xml"===dB){bQ("Rceived mime type is dash");e=cY.FactoryWithContent("dash",du,this.responseText,dA)}else{ds(du,this.responseText,dA)}}}};dv.send(null)}}}else{if(dy.exec(du)){bQ("Found m3u8 as an extension");streamObj=cY.FactoryWithContent("hls",du,dt,dA,true)}else{if(dz.exec(du)){bQ("Found mpd as an extension");streamObj=cY.FactoryWithContent("dash",du,dt,dA,true)}else{ds(du,dt,dA)}}}return streamError.NoError}catch(dx){bQ("Exception thrown from StreamTypeDetector "+dx)}};fragmentState={Invalid:"Invalid",InPorgress:"InProgress",Completed:"Completed",};fragment=function(ds,e){this.id=ds;this.bitrate=e;this.timeStamp=new Date().getTime();this.state=fragmentState.InPorgress;this.downloadTime=0;this.bytesDownloaded=0};streamFragments=function(){this.fragments={};this.fragmentId=0;this.downloadStarted=function(ds){var e=new fragment(this.fragmentId,ds);this.fragments[this.fragmentId.toString()]=e};this.cleanup=function(){for(var e in this.fragments){delete this.fragments[e]}};this.downloadCompleted=function(du,e){if(this.fragments[this.fragmentId.toString()]&&this.fragments[this.fragmentId.toString()].state!==fragmentState.Completed){var dt=this.fragments[this.fragmentId.toString()];var ds=new Date().getTime();dt.downloadTime=ds-dt.timeStamp;dt.state=fragmentState.Completed;if(e){dt.bytesDownloaded=e;bQ("bytesDownloaded reported = "+e)}else{dt.bytesDownloaded=du*dt.downloadTime;bQ("bytesDownloaded not reported and calculated one is = "+dt.bytesDownloaded)}this.fragmentId++}}};hlsStream=function(){var ds=0;var e=new streamFragments();this.streamFragmentDownloadStarted=function(dt){e.downloadStarted(dt);if(ds!==dt){b3(dt)}};this.streamFragmentDownloadCompleted=function(dt){e.downloadCompleted(dt,0)};this.cleanupFragments=function(){e.cleanup()};this.getBandwidthFromFragments=function(){var dv=0;var dt=0;for(index in e.fragments){var du=e.fragments[index];if(du.state===fragmentState.Completed&&du.bytesDownloaded){dv+=du.bytesDownloaded;dt+=du.downloadTime}}if(dt===0){return 0}return(dv/dt)}};var bM="";var dm=function(){if(typeof(akamaiBCVideoObject)!="undefined"){try{var dt=document.getElementsByTagName("script");var dw=0;var ds="";if(dt.length){for(dw=0;dw<dt.length;dw++){if((dt[dw].src!=null)&&((dt[dw].src.indexOf("79423.analytics.edgesuite.net")!=-1)||(dt[dw].src.indexOf("79423.analytics.edgekey.net")!=-1))){bM=dt[dw].src;ds=L("configPath",dt[dw].src);if(ds!=""){aG.url=ds}}}}}catch(dy){}}else{if(cF&&cF.configPath){aG.url=cF.configPath;aJ.objectBased=true}else{aG.url=AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH}}try{if(window){var dA=null;if(bN()){dA=L("AkamaiAnalytics_configPath",window.parent.location);if(dA){aG.url=dA}}else{dA=L("AkamaiAnalytics_configPath",window.location);if(dA){aG.url=dA}}}}catch(dy){}if(aG.url){var dz=parseInt(L("enableGenericAPI",aG.url));if(dz==1){aJ.objectBased=true}aG.beaconSent=parseInt(L("beaconSentNotify",aG.url));var dv=parseInt(L("setVideoObject",aG.url));if(dv==1){aJ.videoPassed=true}var dx=parseInt(L("subscribeVideo",aG.url));if(dx==1){aJ.videoPassed=true}var du=parseInt(L("exception",aG.url));if(du==1){O.printException=true}O.configURLCsmaDebug=parseInt(L("debug",aG.url))}}();function bN(){var dx=false;try{if(window!==window.parent){var dt={};var du={};var ds=document.URL;var dw=null;if(document&&document.referrer){dw=document.referrer}if(ds!=null){ci(ds,dt)}if(dw!=null){ci(dw,du)}if(dt.port===du.port&&dt.protocol===du.protocol&&dt.hostName===du.hostName){dx=true}}else{dx=true}}catch(dv){}return dx}try{if(window){if(bN()){O.pageURLCsmaDebug=parseInt(L("AkamaiAnalytics_debug",window.parent.location))}else{O.pageURLCsmaDebug=parseInt(L("AkamaiAnalytics_debug",window.location))}}}catch(ch){}try{if(typeof(akamaiBCVideoObject)!="undefined"&&typeof(brightcovePerforceVersion)!="undefined"){bm("std:pluginVersion","Brightcove-"+brightcovePerforceVersion)}}catch(ch){bQ("Exception,  pluginVersion: "+ch)}function c2(){var dx=false;try{var dt=document.URL;var du=/(\w+):\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;var ds=du.exec(dt);var dw=ds[1];if(dw=="https"){dx=true}}catch(dv){}return dx}function aZ(){if(O.windowOpened){return}if(O.pageURLCsmaDebug==1||O.configURLCsmaDebug==1||O.configDebug==1){de=true;c0=window.open("http://media-analytics.akamaized.net/library/debug/index.html","","status=0,toolbar=0,location=0,menubar=0,directories=0,height=680,width=1200");bF()}}function bF(){if(!m){var ds=document.getElementsByTagName("script");if(ds.length){for(i=0;i<ds.length;i++){if((ds[i].src!=null)){var e=ds[i].src;if(e.indexOf("akamaihtml5-min.js")!=-1||e.indexOf("csma.js")!=-1){m=e;break}}}}}}aZ();function ad(){try{var ds=aG.url.toLowerCase();var du="";if(ds.indexOf(".edgesuite.net/")==-1&&ds.indexOf(".edgekey.net/")==-1){du="Incorrect Beacon XML Path";du+="<ul style='list-style-type:circle;margin:0'>";du+="<li>We have identified that the Beacon XML in not loaded from an Akamai Domain.</li>";du+="<li>Kindly use the same Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>";bQ(du,"ERROR")}}catch(dt){}}function bY(){try{var dt=p.beaconUrl.toLowerCase();var du="";if(dt.indexOf(".edgesuite.net/")==-1&&dt.indexOf(".edgekey.net/")==-1){du="Beacons sent to incorrect domain : "+dt;du+="<ul style='list-style-type:circle;margin:0'>";du+="<li>We have identified that the beacons are not sent to an Akamai Domain.</li>";du+="<li>Kindly use the proper Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>";bQ(du,"ERROR")}}catch(ds){}}function a4(){try{var ds="";for(var du in cB){if(cB[du]){if(!(du in bk)){if(ds){ds+=", "+du}else{ds=du}}}}if(ds){ds="Following dimensons have not being set : "+ds;ds+="<ul style='list-style-type:circle;margin:0'>";ds+="<li>Please refer 'Set Custom Data' section in Integration guide for more details.</li></ul>";bQ(ds,"INTEGRATION")}}catch(dt){}}function n(dH){try{var du=dH.readyState;var dL=dH.status;if(du==4&&dL==200){var dt=dH.responseXML;if(dt){var dC;if(dt.documentElement){dC=dt.documentElement}else{dC=dt}if(dC){var dD=document.getElementsByTagName("script");var dN=0;var dG=false;var dy="";var dJ="";if(typeof(akamaiBCVideoObject)!="undefined"){if(bM){dG=true;dJ=bM}}else{if(m){dG=V(m);dJ=m}else{if(dD.length){for(dN=0;dN<dD.length;dN++){if((dD[dN].src!=null)){var dM=dD[dN].src;dG=V(dM);if(dG){dJ=dM;break}}}}}}var dw="";var dE=null;if(typeof(akamaiBCVideoObject)!="undefined"){dw=dC.getElementsByTagName("brightcove")[0]}else{dw=dC.getElementsByTagName("plugin")[0];if(x!=null){dE=dC.getElementsByTagName(x)[0]}}if(dw){var dS=dw.getAttribute("name");var dx=dw.getAttribute("version");var dA=dw.getAttribute("link");var dI=dw.getAttribute("size");var dz=dw.getAttribute("date");var dK="";var dO="";var dv="";var ds="";var dF="";if(dE){dv=dE.getAttribute("name");dO=dE.getAttribute("version");ds=dE.getAttribute("date");dF=dE.getAttribute("link")}var dR=aJ.objectBased==true?"JavaScript":dS;bQ("Integration Type : "+dR,"INTEGRATION");if(dG){bQ("Plugin path is correct ["+dJ+"]","INTEGRATION")}else{dK="Incorrect Plugin Path";dK+="<ul style='list-style-type:circle;margin:0'>";dK+="<li>Kindly refer the Integration Guide and use the correct plugin path for integration</li>";dK+="<li>The plugin path should be one of the below :</li>";if(typeof(akamaiBCVideoObject)!="undefined"){dK+="<ul><li>http://79423.analytics.edgesuite.net/html5/brightcoveAkamaihtml5-min.js</li>";dK+="<li>https://79423.analytics.edgekey.net/html5/brightcoveAkamaihtml5-min.js</li></ul>"}else{dK+="<ul><li>http://79423.analytics.edgekey.net/html5/akamaihtml5-min.js</li>";dK+="<li>http://79423.analytics.edgekey.net/js/csma.js</li></ul>"}dK+="</ul>";bQ(dK,"ERROR")}var dQ=cm(b1,dx);if(dQ>=0){bQ("Plugin is Latest (Version = "+b1+" )","INTEGRATION")}else{dK="Old Plugin Version";dK+="<ul style='list-style-type:circle;margin:0'>";dK+="<li>Current Plugin Version is "+b1+"</li>";dK+="<li>The latest plugin version in "+dx+" which was released on date "+dz+"</li>";dK+="<li>Kindly check if proper path mentioned in integration guide is used for integration</li>";dK+="<li>If proper path is used, try by clearing browser cache.</li>";bQ(dK,"ERROR")}if(dO===bX){bQ(dv+" is Latest (Version = "+x+"-"+bX+" )","INTEGRATION")}else{if(x!=null){var dB="Old "+dv+" (Version = "+bX+") is used. ";dB+="<p>The latest "+dv+" version is "+dO+" which was released on "+ds+". </p>";dB+="<p>Kindly download the latest "+dv+" JS from the below location and use it instead. </p>";dB+="<p>"+dF+"</p>";bQ(dB,"ERROR")}}}}}}}catch(dP){}}function V(e){if((e.indexOf("79423.analytics.edgesuite.net")!=-1)||(e.indexOf("79423.analytics.edgekey.net")!=-1)){if(e.indexOf("/html5/akamaihtml5-min.js")!=-1||e.indexOf("/js/csma.js")!=-1||e.indexOf("/js/brightcove-csma.js")!=-1){return true}}return false}function cm(ds,dy){try{var dv=0;if(ds!=null&&dy!=null){var dw=ds.split(".");var dt=dy.split(".");while(dw.length>dt.length){dt.push(0)}while(dt.length>dw.length){dw.push(0)}for(var du=0;du<dw.length;du++){if(parseInt(dw[du])>parseInt(dt[du])){dv=1;break}if(parseInt(dw[du])<parseInt(dt[du])){dv=-1;break}}}}catch(dx){}return dv}function cD(du,ds,e){var dt;if(aa){dt=new XDomainRequest();dt.onload=function(){bQ("XML Request : xmlClient.onload");du("4","200",dt.responseText)};dt.onerror=function(dv){bQ("Error, ais request")};dt.open("GET",ds,e);dt.send(null)}else{dt=new XMLHttpRequest();dt.responseType="json";dt.open("GET",ds,e);if(dt.overrideMimeType){dt.overrideMimeType("application/json")}dt.onreadystatechange=function(){du(dt.readyState,dt.status,dt.responseText)};dt.send(null)}}function c7(du,e,dt,ds){if(aX){}else{aY(du,e,dt,ds)}}function aY(dx,ds,dw,du){if(dx){bQ("XML Request: isXDomainRequest = "+aa+":::funcCallback =  :url: "+ds)}var dv;if(ds==null||ds=="undefined"||ds==""){return}try{if(aa){dv=new XDomainRequest();if(dx){dv.onprogress=function(){};dv.ontimeout=function(){};dv.onload=function(){bQ("XML Request : xmlClient.onload");if(window.DOMParser){var dA=new DOMParser();var dz=dA.parseFromString(dv.responseText,"text/xml");var e={};e.status="200";e.readyState="4";e.responseXML=dz;e.responseText=dv.responseText;dx(e)}else{var dz=new ActiveXObject("Microsoft.XMLDOM");dz.async=false;dz.loadXML(dv.responseText);var e={};e.status="200";e.readyState="4";e.responseXML=dz;dx(e)}};dv.onerror=function(dz){bQ("XML Request : Error, loading xml. url = :"+ds);if(ds.indexOf("serverIp")!=-1){af=true}if(ds.indexOf("protocol-info")!=-1){c.fastTCPFailed=true}}}dv.open("GET",ds,!dw);try{if(du){setTimeout(function(){dv.send()},100)}else{dv.send(null)}}catch(dy){try{dv.send(null)}catch(dt){}}}else{dv=new XMLHttpRequest();dv.open("GET",ds,!dw);if(dx){if(dv.overrideMimeType){dv.overrideMimeType("text/xml")}dv.onreadystatechange=function(){bQ("XML Request : xmlClient.onreadystatechange");dx(dv)}}dv.send(null)}}catch(dy){bQ("Exception,  XML Request for url :"+ds+",Exception:"+dy)}}function ax(dF){var dN=dF.readyState;var dK=dF.status;bQ("readConfig: readyState = "+dN+":::status = "+dK);try{if(dN==4&&dK==200){bh();var dI=dF.responseXML;if(dI){var dE;if(dI.documentElement){dE=dI.documentElement}else{dE=dI}var dt=dE.getElementsByTagName("dataMetrics");for(var dR=0;dR<dt.length;++dR){var dV=dt[dR];var dB=dV.parentNode;var ds=dB.nodeName;bD[dR]=ds;var dO=bJ[ds]=[];var dJ=dB.getAttribute("eventCode");if(dJ){an[ds]=dJ}var dX=dV.getElementsByTagName("data");for(var dU=0;dU<dX.length;++dU){var dP=dX[dU];ds=dP.getAttribute("name");var dM=dP.getAttribute("key");dJ=dP.getAttribute("value");var dZ=dP.getAttribute("sendOnce");var dY=dP.getAttribute("fallback");var dz=dP.getAttribute("size");var dQ=dP.getAttribute("regExpJS");var dA=dP.getAttribute("expiry");var dx={};dx.name=ds;dx.key=dM;if(ds in cB){cB[ds]=true}else{if(dM.indexOf("_cd_")!=-1){cB[ds]=true}}if(dJ){dx.value=dJ}if(dZ){dx.isSent=false;dx.sendOnce=dZ}if(dY){dx.fallback=dY}if(dz){dx.size=dz}if(dQ){dx.regExpJS=dQ}if(dA){dx.expiryDuration=parseInt(parseInt(dA)/1440)}dO.push(dx)}}O.configDebug=parseInt(dE.getAttribute("debug"));if(O.configDebug!=1){O.configDebug=0}if(O.configDebug==1){aZ()}if(dE.getElementsByTagName("isActive")[0]&&dE.getElementsByTagName("isActive")[0].childNodes[0]){cg=dE.getElementsByTagName("isActive")[0].childNodes[0].nodeValue}a0.beaconId=dE.getElementsByTagName("beaconId")[0].childNodes[0].nodeValue;a0.beaconVersion=dE.getElementsByTagName("beaconVersion")[0].childNodes[0].nodeValue;var dG=dE.getElementsByTagName("logTo")[0];p.logType=dG.getAttribute("logType");if(!p.logType){p.logType="relative"}p.logInterval=dG.getAttribute("logInterval")*1000;if(!p.logInterval){p.loginterval=300*1000}p.heartBeatInterval=dG.getAttribute("heartBeatInterval")*1000;if(!p.heartBeatInterval){p.heartBeatInterval=60*1000}p.secondaryLogTime=dG.getAttribute("secondaryLogTime")*1000;if(!p.secondaryLogTime){p.secondaryLogTime=15*1000}p.rebufferDurationOutlier=dG.getAttribute("rebufferDurationOutlier")*1000;if(!p.rebufferDurationOutlier){p.rebufferDurationOutlier=600*1000}p.isSessionWithRebufferLimit=dG.getAttribute("isSessionWithRebufferLimit");if(!p.isSessionWithRebufferLimit){p.isSessionWithRebufferLimit=500}p.fastTCPEnabled=dG.getAttribute("fastTCPEnabled");if(!p.fastTCPEnabled){p.fastTCPEnabled=0}if(p.fastTCPEnabled==1){c.fastTCPEnabled=true}p.aisRequestLimit=dG.getAttribute("aisRequestLimit");if(!p.aisRequestLimit){p.aisRequestLimit=3}if(cf){cf.aisRequestLimit=p.aisRequestLimit}p.aisRequestInterval=dG.getAttribute("aisRequestInterval")*1000;if(!p.aisRequestInterval){p.aisRequestInterval=30*1000}if(cf){cf.aisRequestInterval=p.aisRequestInterval}p.startupTimeOutlierLimit=dG.getAttribute("startupTimeOutlierLimit")*1000;if(!p.startupTimeOutlierLimit){p.startupTimeOutlierLimit=600*1000}p.visitTimeout=dG.getAttribute("visitTimeout")*60*1000;if(!p.visitTimeout){p.visitTimeout=60*60*1000}p.urlParamSeparator=dG.getAttribute("urlParamSeparator");if(!p.urlParamSeparator){p.urlParamSeparator="~"}p.encodedParamSeparator=dG.getAttribute("encodedParamSeparator");if(!p.encodedParamSeparator){p.encodedParamSeparator="*@*"}p.initBrowserCloseTime=dG.getAttribute("initBrowserCloseTime");if(!p.initBrowserCloseTime){p.initBrowserCloseTime=15*60*1000}p.seekThreshold=dG.getAttribute("seekThreshold")*1000;if(!p.seekThreshold){p.seekThreshold=2000}var du=dG.getAttribute("delayTimer");if(du){bp.time=du}var dL=dG.getAttribute("disableDelay");if(dL==1){bp.enabled=false}var dw=dG.getElementsByTagName("host")[0].childNodes;if(dw.length>1){p.beaconUrl="";for(var dU=0;dU<dw.length;dU++){p.beaconUrl+=dw[dU].nodeValue}}else{p.beaconUrl=dG.getElementsByTagName("host")[0].childNodes[0].nodeValue}if((p.beaconUrl.indexOf("http://")==-1)&&(p.beaconUrl.indexOf("https://")==-1)){p.beaconUrl="http://"+p.beaconUrl}p.beaconUrl+=dG.getElementsByTagName("path")[0].childNodes[0].nodeValue;p.maxLogLineLength=dG.getAttribute("maxLogLineLength");if(!p.maxLogLineLength){p.maxLogLineLength=2048}p.maxLogLineLength-=p.beaconUrl.length;p.logVersion="2.0";p.formatVersion="1.1";if(dG.getElementsByTagName("formatVersion")&&dG.getElementsByTagName("formatVersion")[0]&&dG.getElementsByTagName("formatVersion")[0].childNodes[0]){p.formatVersion=dG.getElementsByTagName("formatVersion")[0].childNodes[0].nodeValue}p.useKey=parseInt(dE.getElementsByTagName("statistics")[0].getAttribute("useKey"));var d0=dE.getElementsByTagName("feedback")[0];if(d0!=null&&d0!==""){bA.shouldSendFLine=true;bA.limit=d0.getAttribute("limit");if(!bA.limit){bA.limit=3}bA.socialShareLimit=d0.getAttribute("socialShareLimit");if(!bA.socialShareLimit){bA.socialShareLimit=1}}var d1=dE.getElementsByTagName("security")[0];if(d1!=null&&d1!==""){var dS=d1.getElementsByTagName("ViewerDiagnostics")[0];if(dS!=null&&dS!==""){aR.viewerDiagnostics={};var dv=dS.getElementsByTagName("salt")[0];if(dv!=null&&dv!==""){aR.viewerDiagnostics.salt={};var dC=dv.getAttribute("value");var dD=dv.getAttribute("version");if(dC!=null&&dC!==""){aR.viewerDiagnostics.salt.value=dC;aR.viewerDiagnosticsEnabled=true;if(dD!=null&&dD!==""){aR.viewerDiagnostics.salt.version=dD}aR.viewerDiagnostics.salt.bytes=dv.getAttribute("bytes")*2;if(!aR.viewerDiagnostics.salt.bytes){aR.viewerDiagnostics.salt.bytes=16*2}aR.viewerDiagnostics.salt.iterations=dv.getAttribute("iterations");if(!aR.viewerDiagnostics.salt.iterations){aR.viewerDiagnostics.salt.iterations=50}}else{aR.viewerDiagnosticsEnabled=false}}}}var dy=dE.getElementsByTagName("bucketInfo")[0];cA.bucketLength=dy.getElementsByTagName("bucketLength")[0].childNodes[0].nodeValue;cA.bucketCount=dy.getElementsByTagName("bucketCount")[0].childNodes[0].nodeValue;cJ=true;for(var dT in bk){try{if(dT.substring(0,4)=="_cd_"){da(dT)}}catch(dW){}}q();by();bY();var dH=dE.getElementsByTagName("match");for(var dU=0;dU<dH.length;dU++){match=dH[dU];try{parentKey=match.parentNode.parentNode.getAttribute("name");if(!b9[parentKey]){b9[parentKey]={}}b9[parentKey][match.getAttribute("key")]={type:match.getAttribute("type"),name:match.getAttribute("name"),value:match.getAttribute("value")}}catch(dW){bQ(dW)}}be();P();aW()}}}catch(dW){bQ("Exception,  readConfig :"+dW)}}function da(e){var dt=bJ.common;if(dt!=null){var ds={};ds.name=e;ds.key=e;dt.push(ds)}}function q(){try{var ds=bJ.split;for(var dt=0;dt<ds.length;dt++){bV[ds[dt].name]=ds[dt].key}}catch(du){}}function be(){var dv={};try{if(!b9.bitRateBucketTimes){b9.bitRateBucketTimes={};dv=b9.bitRateBucketTimes;dv.U={key:"U",type:"range"};dv.S={key:"S",max:1500,value:"max:1500",type:"range"};dv.Q={key:"Q",min:1500,max:2500,value:"min:1500;max:2500",type:"range"};dv.D={key:"D",min:2500,value:"min:2500",type:"range"}}else{var dx,du,dt;for(dt in b9.bitRateBucketTimes){dv=b9.bitRateBucketTimes[dt];if(dv){dv.key=dt;if(!dv.value){dv.category="first"}else{dx=dv.value;du=dx.split(";");for(var ds=0;ds<du.length;ds++){if(du[ds].indexOf("min:")!=-1){dv.min=parseInt(du[ds].split(":")[1])}else{if(du[ds].indexOf("max:")!=-1){dv.max=parseInt(du[ds].split(":")[1])}}}}}}}cn.bitRateBucketMap={};for(var dw in b9.bitRateBucketTimes){cn.bitRateBucketMap[dw]=0}}catch(dy){bQ("Exception, find bit rate match rules :"+dy)}}function P(){bQ("fillVideoWithConfig function");if(aJ&&aJ.akamai){var e=aJ.akamai;e.populateMetricsFromConfiguration();if(e.isSLineSent){z(aJ)}if(aR.viewerDiagnosticsEnabled){ca(e)}e.cdn=aQ(e)}}function aW(){bQ("sendStoredBeacons: number of beacons to be sent = "+c3.length);try{var dt=aJ.akamai;while(c3.length>0){var ds=c3.shift();bQ("readConfig: sending beacon event code = "+ds.code);ds.element.populateMetricsFromConfiguration();ds.element.xViewerId=cq.xViewerId;ds.element.xViewerIdVersion=cq.xViewerIdVersion;ds.element.cdn=aQ(ds.element);b7(ds.element,ds.code,ds.synch)}}catch(du){bQ("Exception,  sendStoredBeacons"+du)}}c7(ax,aG.url,false,true);function aQ(du){if(bk.cdn){return bk.cdn}else{try{for(key in b9.cdn){var dx=b9.cdn[key];if(dx&&dx.name&&dx.value){var dw=du[dx.name];var ds=dx.value.split(",");for(var dt=0;dt<ds.length;dt++){if(dw&&(dw.indexOf(ds[dt].trim())!=-1)){return key;break}}}}}catch(dv){bQ("Exception Get CDN"+dv.message)}}}function aD(dt){var ds="";var e;if(dt.indexOf("://")!=-1){e=dt.indexOf("://");dt=dt.substring(e+3)}if(dt.indexOf("/")!=-1){e=dt.indexOf("/");if(dt.indexOf("?")!=-1){var du=dt.indexOf("?");e=(e<du)?e:du}ds=dt.substring(0,e)}else{if(dt.indexOf("?")!=-1){var e=dt.indexOf("?");ds=dt.substring(0,e)}else{ds=dt}}return ds}function aA(dw,dv,e,du){var dt=dw.currentState;var ds=dw.seekObject;if(du=="S"&&ds.seekStartStreamTime==-1){ds.seekStartEpochTime=dt.timeUpdateClockTime;ds.seekEndEpochTime=dv;ds.seekStartStreamTime=dt.timeUpdateStreamTime;ds.seekEndStreamTime=e}else{if(du=="S"&&ds.seekEndStreamTime==dt.timeUpdateStreamTime){ds.seekEndEpochTime=dv;ds.seekEndStreamTime=e}else{if(ds.seekStartStreamTime!=-1){dw.seekTime+=ds.seekEndEpochTime-ds.seekStartEpochTime;if(dw.seekIntervalsAsString!="-"){dw.seekIntervalsAsString+=","+ds.seekStartStreamTime+":"+ds.seekEndStreamTime}else{dw.seekIntervalsAsString=ds.seekStartStreamTime+":"+ds.seekEndStreamTime}if(dw.pauseSeekSession!="-"){dw.pauseSeekSession+=",S("+ds.seekStartStreamTime+":"+(ds.seekStartEpochTime-dw.startTimer)+"-"+ds.seekEndStreamTime+":"+(ds.seekEndEpochTime-dw.startTimer)+")"}else{dw.pauseSeekSession="S("+ds.seekStartStreamTime+":"+(ds.seekStartEpochTime-dw.startTimer)+"-"+ds.seekEndStreamTime+":"+(ds.seekEndEpochTime-dw.startTimer)+")"}++dw.seekCount;dw.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1}}}}}function W(dt,ds){bQ("set RebufferSession : curTime = "+ds);try{var dv=Math.round(ds-dt.lastLogTime-dt.curRebufferTime);var dw=Math.round(dt.curRebufferTime);dt.currRebufferEndEpoch=Math.round(ds);dt.currRebufferStartEpoch=Math.round(ds-dw);if(dw>p.isSessionWithRebufferLimit){dt.isSessionWithRebuffer=1}if(dt.rebufferSession){dt.rebufferSession=dt.rebufferSession+";"+dv+":"+dw}else{dt.rebufferSession=dv+":"+dw}}catch(du){bQ("Error, set RebufferSession"+du.message)}}function cK(dy,ds){var dv;var dx;if(ds=="B"){var dt="";if(dy.rebufferSession){var e=dy.rebufferSession.split(";");for(var du=0;du<e.length;du++){var dw=e[du].split(":");if(du==0){dt+="0:"+dw[1]}else{dt+=e[du]}if(du!=e.length-1){dt+=";"}}bQ("newRebufferSession = "+dt);dy.rebufferSession=dt}dx=1;dv=0}else{dx=0;if(dy.lastRebufferEndEpoch>0){dv=dy.firstRebufferStartEpoch-dy.lastRebufferEndEpoch}else{dv=-1}}dy.rebufferSession=dx+":"+dv+";"+dy.rebufferSession;dy.lastRebufferEndEpoch=dy.currRebufferEndEpoch}function cx(dv,du){var ds=1;dv.rebufferSessionH=null;if(!dv.rebufferSessionArrayHLine||((dv.rebufferSessionArrayHLine)&&(dv.rebufferSessionArrayHLine.length===0))){return}while(dv.rebufferSessionArrayHLine[ds]&&((du-dv.rebufferSessionArrayHLine[ds])>(2*p.heartBeatInterval))){dv.rebufferSessionArrayHLine.shift();dv.rebufferSessionArrayHLine.shift();if(dv.isSessionWithRebufferH==1){dv.sendIsSessionWithRebufferH=0;dv.isSessionWithRebufferH=null}}while(dv.rebufferSessionArrayHLine[ds]){var e=du-dv.rebufferSessionArrayHLine[ds-1];var dt=dv.rebufferSessionArrayHLine[ds]-dv.rebufferSessionArrayHLine[ds-1];if(dv.sendIsSessionWithRebufferH==1){if(dt>p.isSessionWithRebufferLimit){dv.isSessionWithRebufferH=1}}if(dv.rebufferSessionH){dv.rebufferSessionH=dv.rebufferSessionH+";"+e+":"+dt}else{dv.rebufferSessionH=e+":"+dt}ds=ds+2}ds=ds-1;if(dv.rebufferSessionArrayHLine[ds]){var e=du-dv.rebufferSessionArrayHLine[ds];if(dv.sendIsSessionWithRebufferH==1){if(e>p.isSessionWithRebufferLimit){dv.isSessionWithRebufferH=1}}if(dv.rebufferSessionH){dv.rebufferSessionH=dv.rebufferSessionH+";"+e+":"+e}else{dv.rebufferSessionH=e+":"+e}}}function cI(e){if(bk.deliveryType){return bk.deliveryType}else{return e.deliveryType}}function ck(dt){var e=dt.readyState;var ds=dt.status;if(parseInt(ds/100)===4||ds===0){bQ("readServerIp: serverIpFailed request falied as status is ,in 400 series");af=true}if(e==4&&ds==200){var dv=dt.responseXML;if(dv){var du;if(dv.documentElement){du=dv.documentElement}else{du=dv}if(bU){cG.serverip=du.getElementsByTagName("ip")[0].childNodes[0].nodeValue}else{cG.serverip=du.getElementsByTagName("serverip")[0].childNodes[0].nodeValue}bQ("readServerIp : diagnostics.serverip =  "+cG.serverip)}}}function al(e){var du=e.akamai;if(af){bQ("getting ServerIp : serverIp request failed");return}if(du.hostName){try{var dt=null;if(du.protocol){if(du.protocol.indexOf("rtmp")!=-1){dt="http://"+du.hostName+"/fcs/ident";bU=true}else{dt=du.protocol+"//"+du.hostName+"/serverip"}bQ("getting ServerIp : serverIpPath = "+dt);c7(ck,dt,false,true)}}catch(ds){af=true;bQ("getting ServerIp: error, xmphttprequest")}}}function ak(dt){var ds="";var dv=dt.readyState;var du=dt.status;if(parseInt(du/100)===4||du===0){bQ("read fast tcp: fast tcp Failed request falied as status is 400 series");c.fastTCPFailed=true}try{if(dv==4&&du==200){var dz=dt.responseXML;if(dz){bQ("populating fast tcp");var dA;if(dz.documentElement){dA=dz.documentElement}else{dA=dz}if(dA&&dA.firstElementChild){var e=dA.firstElementChild;var dw="";var dy="";if(e){if(e.hasAttribute("key")){dy=e.getAttribute("key");dw=e.childNodes[0].nodeValue;ds=dy+":"+dw}while(e.nextElementSibling){e=e.nextElementSibling;if(e.hasAttribute("key")){dy=e.getAttribute("key");dw=e.childNodes[0].nodeValue;if(ds){ds+=","+dy+":"+dw}else{ds=dy+":"+dw}}}}}}}if(ds){c.ftcp=ds}}catch(dx){bQ("Exception,  read fast tcp"+dx)}}function cz(e){var du=e.akamai;if(c.fastTCPFailed){bQ("getting fast tcp: request failed");return}if(du.hostName){try{var dt=du.protocol+"//"+du.hostName+"/protocol-info";bQ("getting fast tcp : fastTCPPath = "+dt);c7(ak,dt,false,true)}catch(ds){c.fastTCPFailed=true;bQ("getting ServerIp: error, xmphttprequest")}}}function aV(ds,dv){try{var dt=ds.akamai;if(p&&p.logInterval&&!dv){dt.fastTCPServerIpTimer=b2(aV,p.logInterval,[ds])}if(!af){al(ds)}if(!c.fastTCPFailed&&c.fastTCPEnabled){cz(ds)}if(af&&c.fastTCPFailed){b5(dt.fastTCPServerIpTimer)}}catch(du){bQ("Exception get fast tcp server ip")}}function bn(e){var ds=null;if(e.objectBased){if(e.errorReason){ds=e.errorReason}else{ds=cp[0]}}else{if(e.externalError){ds=e.externalError}else{if(e.error&&e.error.code){ds=cp[e.error.code]}else{ds=cp[0]}}}return ds}function aj(ds){var e="Play.End.Detected";if(ds.objectBased){if(ds.endReason){e=ds.endReason}}return e}function C(){cq.viewerId=bk.viewerId?bk.viewerId:null;cq.viewerDiagnosticsId=bk.viewerDiagnosticsId?bk.viewerDiagnosticsId:(bk.viewerId?bk.viewerId:null)}function d(ds){var e=dq();return e}function aN(dt){var dv=cq.viewerId;if(dv=="-"){return}if(!dv){try{if(window&&window.localStorage&&window.localStorage.getItem("akamai_clientId")){dv=window.localStorage.getItem("akamai_clientId")}else{try{dv=dq();if(window&&window.localStorage){window.localStorage.setItem("akamai_clientId",dv)}}catch(ds){bQ("window.localStorage Exception :"+ds)}}}catch(du){bQ("Exception,  getting viewerId"+du);dv=dq()}}return dv}function ca(dx,du){var dw=null;if(cq&&cq.viewerDiagnosticsId){dw=cq.viewerDiagnosticsId}var ds="";var dv=50;var e=16*2;if(!dw||dw=="-"){return}if(du&&dx.xViewerId){return}a6(dx);bQ("get Viewer DiagnosticsID");dw=encodeURIComponent(dw);if(aR&&aR.viewerDiagnostics&&aR.viewerDiagnostics.salt&&aR.viewerDiagnostics.salt.value){ds=aR.viewerDiagnostics.salt.value}if(aR&&aR.viewerDiagnostics&&aR.viewerDiagnostics.salt&&aR.viewerDiagnostics.salt.iterations){dv=aR.viewerDiagnostics.salt.iterations}if(aR&&aR.viewerDiagnostics&&aR.viewerDiagnostics.salt&&aR.viewerDiagnostics.salt.bytes){e=aR.viewerDiagnostics.salt.bytes}var dt=bI.PBKDF2(dw,ds,{keySize:e/8,iterations:dv});dx.xViewerId=dt;cq.xViewerId=dt}function a6(ds){var e=null;if(aR&&aR.viewerDiagnostics&&aR.viewerDiagnostics.salt&&aR.viewerDiagnostics.salt.version){e=aR.viewerDiagnostics.salt.version}ds.xViewerIdVersion=e;cq.xViewerIdVersion=e}function c5(dt,du,ds){var e;if(du=="viewerId"||du=="clientId"||du=="viewerDiagnosticsId"){return}if(ds){if(bk[ds]){e=bk[ds]}else{if(dt[ds]){e=dt[ds]}}}dt[du]=e}this.getValueFromQueryString=function(){return L(key,searchURL)};function L(dt,dx,dv){if(dv==null){dv=""}try{if(dx==""||dx==null){return}dt=dt.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var du=new RegExp("[\\?&]"+dt+"=([^&#]*)");var ds=du.exec(dx);if(ds==null){return dv}else{return ds[1]}}catch(dw){bQ("Exception,  getValueFromQueryString :"+dw);return dv}}function bZ(e){var ds=e.akamai;b5(ds.fastTCPServerIpTimer);if(a8){aV(e)}}function b2(du,dw,dt){try{var ds=null;ds=setTimeout(function(){du.apply(undefined,dt)},dw);return ds}catch(dv){bQ("Exception, set window timeout:"+dv);try{ds=window.setTimeout(function(){du.apply(undefined,dt)},dw)}catch(dv){return null}return ds}}function b5(ds){try{clearTimeout(ds)}catch(dt){bQ("Exception clear window timeout:"+dt);try{window.clearTimeout(ds)}catch(dt){}}}function z(e){bQ("startBeaconTImer");var ds=e.akamai;if(ds.areTimerStarted){return}bQ("startBeaconTimer: starting beacon timer");ds.firstPLineTimer=b2(dj,p.secondaryLogTime,[e]);ds.hLineTimer=b2(db,p.heartBeatInterval,[e]);ds.fastTCPServerIpTimer=b2(bZ,(p.logInterval-5000),[e]);if(e.objectBased){M=500}ds.pollingTimer=b2(cS,M,[e]);ds.areTimerStarted=true}function bK(e){var ds=e.akamai;if(ds){if(ds.hLineTimer){b5(ds.hLineTimer)}if(ds.pollingTimer){b5(ds.pollingTimer)}if(ds.fastTCPServerIpTimer){b5(ds.fastTCPServerIpTimer)}if(ds.firstPLineTimer){b5(ds.firstPLineTimer)}if(cf&&cf.retryTimer){b5(cf.retryTimer)}}}function df(ds){var dv=ds.akamai;bA.akamai={};bA.dataSent={};dv.areTimerStarted=false;dv.isCLineSent=false;dv.isELineSent=false;dv.lastRebufferEndEpoch=0;dv.connectTime=0;bp.browserClose=false;dv.totalPlayClockTime=dv.totalStreamTime=dv.totalRebufferCount=dv.totalRebufferTime=0;dv.isVisitEnd=0;dv.sequenceId="0";dv.wasPutToSleep=false;dv.chasingSleep=null;dv.continuousRebufferDuration=0;aL(ds);dv.attemptId=dv.sessionId=d(dv);C();dv.clientId=dv.viewerId=aN(dv);if(aR.viewerDiagnosticsEnabled){ca(dv)}dv.lastPLineSentTime=dv.hLineSentCount=dv.lastSLineSentTime=dv.lastHLineSentTime=0;dv.lastHTime=0;Y("HTML_LastCLineTime");bR=[0,0,0,0,0,0,0,0,0,0,0,0];var dw=parseInt(F("HTML_VisitCountCookie"));if(!dw||dw==""){dv.isVisitStart=1;dw=0;bs("HTML_VisitCountCookie",dw)}var dx=parseInt(F("HTML_isPlayingCount"));if(!dx||dx==""){dx=0;bs("HTML_isPlayingCount",dx)}var e=F("HTML_VisitValueCookie");if(!e||e==""){bs("HTML_VisitValueCookie","0|0|0|0|0|0|0|0|0|0|0|0|0")}var du=F("HTML_BitRateBucketCsv");if(!du||du==""){bs("HTML_BitRateBucketCsv","0,0,0,0,0,0,0,0")}var dt=F(ct);if(!dt||dt==""){dv.browserSessionId=dv.visitId=dq();bs(ct,dv.visitId)}else{dv.browserSessionId=dv.visitId=F(ct)}}function H(e,du){var dt=e.akamai;dt.isILineSent=true;++dt.iLineCount;dt.lastSLineSentTime=du;if(dt.iLineCount==1){var dv=parseInt(F("HTML_VisitCountCookie"));++dv;bs("HTML_VisitCountCookie",dv);g=du}var ds=parseInt(F("HTML_VisitIntervalStartTime"));if(!ds||ds==" "){ds=du;bs("HTML_VisitIntervalStartTime",ds)}bR[0]=1;dt.sendVLine=true}function av(dw,dv){try{var du=aJ.akamai;if(du.clearVisitTimeoutId){b5(du.clearVisitTimeoutId)}df(aJ);du.logInterval="0";if(!cJ){var dt=cX(du);var ds={element:dt,code:"init",synch:dw};c3.push(ds)}else{b7(du,"init",dw)}du.lastLogTime=dv;++du.sequenceId;H(aJ,dv);du.currentState.state=cH.init;bQ(": sendBeaconILineAd : Setting state to init");du.currentState.timeUpdateClockTime=dv;du.startTimer=dv}catch(dx){bQ("Exception, send I line AD:"+dx)}}function dj(e){var dt=cb();var ds=e.akamai;ds.lastPLineSentTime=dt;v(e,"playing",false,dt)}function w(dz,dB,dv,du){try{bQ("start of the session function");var dx=dz.akamai;if(!dx||!dx.firstTimePlay){return}if(dx.adLoadTime&&dx.adLoadTime>dx.iLineSentTime){dx.startupTime=dx.adLoadTime-dx.iLineSentTime;if(dx.adEndTime){dx.startupTime+=dv-dx.adEndTime}}else{dx.startupTime=dv-dx.iLineSentTime}if(dx.startupTime>p.startupTimeOutlierLimit){dx.outlierStartupTime=dx.startupTime;dx.startupTime=0}dx.bufferingTime=dx.startupTime;var dA={type:"startup",startTime:0,endTime:dx.startupTime};aL(dz);var dt=D(dz);ci(dt,dx);dx.streamUrl=dt;if(dt!=null&&dt!=""){if(/.m3u8$/.exec(dt)){dx.format="L";dx.playerFormat=dx.playerType+":"+dx.format}else{dx.format="P";dx.playerFormat=dx.playerType+":"+dx.format;dx.deliveryType="O"}bQ("Creating hls stream");dx.stream=new hlsStream()}var dw=StreamTypeDetector(dt,ar,dg,function(e){if(e){bQ("detected stream type = "+e.getStreamType());bQ("Received steam type = "+e.getStreamType()+"\n Stream URL = "+e.getStreamURL()+"\n Stream Name = "+e.getStreamName()+"\n Stream Length = "+e.getStreamLength()+"\n Stream Format = "+e.getStreamFormat()+"\n Stream Delivery Type = "+e.getDeliveryType());dx.streamUrl=e.getStreamURL();dx.format=e.getStreamFormat();dx.deliveryType=e.getDeliveryType();if(e.getStreamLength()){dx.streamLength=e.getStreamLength()}dx.streamName=e.getStreamName()}});if(dw!==streamError.NoError){bQ("failed to detect stream. May be we do not have sufficient information")}dx.streamLength=parseInt(I(dz));dx.played=[];var ds=parseInt(F("HTML_isPlayingCount"));ds=ds+1;bs("HTML_isPlayingCount",ds);C();if(aR.viewerDiagnosticsEnabled){ca(dx,true)}dx.lastSLineSentTime=dv;v(dz,"playStart",false,dv);dx.rebufferSessionArrayHLine=[];dx.isSLineSent=true;if(cJ){z(dz)}bR[1]=1;dx.isFirstTitle=null;dx.isVisitStart=null;dx.firstTimePlay=false;dx.initPlayed(du)}catch(dy){bQ("Exception, send S line:"+dy)}}function c9(ds,dv,du){try{bQ("send beacon I line");var dt=ds.akamai;dt.cdn=aQ(dt);if(a8){aV(ds,true)}if(!dt.iLineSentTime){dt.iLineSentTime=du}if(ds.videoWidth&&ds.videoHeight){dt.videoSize=ds.videoWidth+"x"+ds.videoHeight}if(!dt.isILineSent){df(ds);v(ds,"init",dv,du);H(ds,du);if(dt.clearVisitTimeoutId){b5(dt.clearVisitTimeoutId)}}}catch(dw){bQ("Exception send I line:"+dw)}}function db(e){var dt=e.akamai;dt.hLineTimer=b2(db,p.heartBeatInterval,[e]);var ds=cb();v(e,"heartBeat",false,ds);dt.lastHLineSentTime=ds;dt.hLineSentCount++;if((dt.hLineSentCount%(p.logInterval/p.heartBeatInterval))==0){v(e,"playing",false,ds);dt.lastPLineSentTime=ds;if(dt.continuousRebufferDuration>=p.rebufferDurationOutlier){if(aJ.objectBased){aJ.errorReason="Error.Continous.Rebuffer";U(aJ)}else{akamaiHandleError("Error.Continous.Rebuffer")}}}}function bO(ds,dw,dv,du){try{bQ("sendBeaconCLine : endReasonCode = "+dw);var dt=ds.akamai;dt.endReasonCode=dw;v(ds,"complete",dv,du);var dz=parseInt(F("HTML_isPlayingCount"));dz=dz-1;bs("HTML_isPlayingCount",dz);dt.isVisitStart=null;dt.isCLineSent=true;dt.firstTimePlay=true;bK(ds);var dy=du;bs("HTML_LastCLineTime",dy)}catch(dx){bQ("Exception, send beacon C Line:"+dx)}}function h(ds,dy,dv,du){try{var dt=ds.akamai;if(dy){dt.errorCode=dy}else{dt.errorCode="UNKNOWN"}bQ("sendBeaconELine : errorCode = "+dt.errorCode);bR[3]=1;if(dt.sequenceId==1){bR[11]=1;C();if(aR.viewerDiagnosticsEnabled){ca(dt,true)}}dt.playerState="E";v(ds,"error",dv,du);if(dt.isSLineSent){var dz=parseInt(F("HTML_isPlayingCount"));dz=dz-1;bs("HTML_isPlayingCount",dz)}dt.isELineSent=true;dt.isVisitStart=null;dt.firstTimePlay=true;bK(ds);var dx=du;cv(dt);bs("HTML_LastCLineTime",dx)}catch(dw){bQ("Exception, send beacon E line:"+dw)}}function aq(ds,dw){try{bQ("sendBeaconVLine");var dv=ds.akamai;dv.isVisitEnd=1;r(dv);var dt=parseInt(F("HTML_VisitIntervalStartTime"));dv.visitMaxPersistentBitRateBucket=co();dv.visitInterval=dw-dt;if(dt==""||dt==null||isNaN(dt)){dv.visitInterval=dw-g}dv.sessionId=null;dv.attemptId=null;dv.sequenceId=null;Y("HTML_BitRateBucketCsv");Y("HTML_VisitValueCookie");Y("HTML_VisitIntervalStartTime");Y("HTML_LastCLineTime");Y("HTML_VisitCountCookie");Y("HTML_isPlayingCount");Y(ct);v(ds,"visit",true,dw);bA.akamai={};bA.dataSent={};bQ("sendBeaconVLine: beacon sent");dv.sendVLine=false;dv.iLineCount=0;b5(ds.akamai.clearVisitTimeoutId);var du=dv.isPlaylist;ds.akamai=new bb(aJ);if(typeof(akamaiBCVideoObject)!="undefined"){ds.akamai.isPlaylist=du}}catch(dx){bQ("Exception, send beacon V line:"+dx)}}function ae(){var e=F("HTML_VisitValueCookie");var dv=e.split("|");var dw;for(var dt=0;dt<bR.length;dt++){G[dt]+=bR[dt]}bQ("setVisitValueCookie :: visit values saved"+G);for(var du=0;du<dv.length;du++){dv[du]=parseInt(dv[du])+bR[du]}var ds=dv.join("|");bs("HTML_VisitValueCookie",ds)}function bj(){try{var dv=F("HTML_BitRateBucketCsv");var dw=aE.split(",");var ds=dv.split(",");var dt=0;for(var du in cn.bitRatePlayTime){du=parseInt(du);dt=parseInt((du-1)/500000);if(dt>7){dt=7}ds[dt]=parseInt(ds[dt])+cn.bitRatePlayTime[du];dw[dt]=parseInt(dw[dt])+cn.bitRatePlayTime[du]}dv=ds.join(",");bs("HTML_BitRateBucketCsv",dv);aE=dw.join(",")}catch(dx){bQ("Exception set bit rate bucketcsv"+dx)}}function cu(e){bQ("entered setVisitValueParameters");bR[4]=e.totalPlayClockTime;bR[5]=e.totalPlayStreamTime;bR[6]=e.totalRebufferCount;bR[7]=e.totalRebufferTime;bR[8]=e.totalAdPlayClockTime;bR[9]=e.totalAdStartCount;bR[10]=e.totalAdAbandonCount;if(e.totalPlayClockTime>5000){bR[2]=1}bj();ae()}function r(du){try{var dz=F("HTML_VisitValueCookie");var ds=dz.split("|");var dw=true;if(ds==""||ds==null){dw=false}var dA;var dy=[];if(dw){dy=ds}else{dy=G}var dx=["visitAttempts","visitPlays","visitViews","visitErrors","visitPlayClockTime","visitPlayStreamTime","visitRebufferCount","visitRebufferTime","visitAdPlayClockTime","visitAdStartCount","visitAdAbandonCount","visitStartupErrors"];for(var dt=0;dt<dx.length;dt++){du[dx[dt]]=dy[dt]}}catch(dv){bQ("Exception get visit value  cookie : "+dv)}}function co(){try{var dw=F("HTML_BitRateBucketCsv");var dt=dw.split(",");var ds=false;if(dt==null||dt==""){dt=aE.split(",")}dt[0]=parseInt(dt[0]);var dy="00",du=dt[0];for(var dv=0;dv<dt.length;dv++){dt[dv]=parseInt(dt[dv]);if(dt[dv]>0){ds=true}if(du<dt[dv]){du=dt[dv];dy="0"+dv}}if(ds){return dy}}catch(dx){bQ("Exception, get visit max bit rate bucket"+dx)}}function bt(du){try{var ds=encodeURI(du);ds=ds.replace(/#/g,"%23");return ds}catch(dt){bQ("Exception,  encoding beacon");return du}}function bl(){try{bQ("send delayed beacon");if(bp.queue&&bp.queue.length>0){var ds=bp.queue.shift();bp.timer=b2(bl,bp.time,[]);bQ("Beacon ::"+ds.url,"Beacon");c7(null,ds.url,ds.isSync);if(de){aB.processLogs({api:"reportBeaconData",value:ds.url})}}else{bQ("send delayed beacon : clear the timer");b5(bp.timer);bp.timer=null}}catch(dt){bQ(dt)}}function aF(dw,dv,du){if(cg==0){bQ("put beacon On Wire, dont send beacon isACtive is zero");return}var e=p.beaconUrl+"?"+dw;try{if(bp.enabled){var dt={};if(bp.browserClose){if(bp.timer){b5(bp.timer)}if(bp.queue&&bp.queue.length>0){while(bp.queue.length>0){dt=bp.queue.shift();bQ("put beacon on wire, send beacon from queue::"+dt.url,"BEACON");bQ("Beacon ::"+dt.url,"Beacon");if(!du.wasPutToSleep){if(de){aB.processLogs({api:"reportBeaconData",value:dt.url})}c7(null,dt.url,dt.isSync)}}}bQ("put beacon on wire browser close::"+e,"BEACON");bQ("Beacon ::"+e,"Beacon");if(!du.wasPutToSleep){if(de){aB.processLogs({api:"reportBeaconData",value:e})}c7(null,e,dv)}}else{bQ("put beacon on wire pushing beacon in queue::"+e);dt.url=e;dt.isSync=dv;bp.queue.push(dt);if(bp.timer){bQ("put beacon on wire: timer is running")}else{bQ("put beacon on wire: call send delayed beacon");if(!du.wasPutToSleep){bl()}}}}else{bQ("put beacon on wire"+e,"BEACON");if(!du.wasPutToSleep){c7(null,e,dv)}}}catch(ds){bQ("failed to send beacon");bQ(ds)}}function cW(ds,dt){try{ds=ds.substring(0,dt);return ds}catch(du){bQ("Exception,  getTruncatedMetric"+du);return ds}}function dk(dy,dw,ds,dx){try{var du;for(var dv=0;dv<dw.length;dv++){if(dw[dv].expiryDuration){dh(dy,dw[dv])}du=dw[dv].name;var dt=null;if(du in dy){dt=dy[du]}if(dw[dv].value){dt=dw[dv].value}if(dt||dt==0){if(dw[dv].sendOnce){if(dw[dv].isSent===false){if(dt!=0){dw[dv].isSent=true}k(dt,dw,du,dv,dx,ds)}}else{k(dt,dw,du,dv,dx,ds)}}}}catch(dz){bQ("Exception, assemble logs:"+dz)}}function k(dy,dz,dt,dv,ds,dw){try{if(dz[dv].regExpJS){var dA=new RegExp(dz[dv].regExpJS);var du=dA.exec(dy);if(du){dy=du[du.length-1]}}}catch(dx){bQ("Exception,  evaluating regExpJS attribute for metric : "+dt)}dy=String(dy).replace(/~/g,p.encodedParamSeparator);if(dz[dv].size){dy=cW(dy,dz[dv].size)}if(dz[dv].key in ds){}else{ds[dz[dv].key]=dz[dv].key;dw.push((p.useKey?dz[dv].key:dt)+"="+dy)}}function b7(dC,dy,dx){try{bQ("getBeaconStrings : eventCode =  "+dy);var dv=bJ.common;var dN=[];var dB=bJ[dy];if(dB==null||dB=="undefined"){bQ("getbeaconstrings, return as eventmetrics undefined");return}var dG=[];var dM={};if(!dC.eventCode){dC.eventCode=an[dy]}dk(dC,dv,dN,dM);if(dy=="error"){dC.updateTerminateMetrics();cu(dC,bR)}if(dy=="complete"){dC.updateTerminateMetrics();var ds=bJ.playing;cu(dC,bR);dk(dC,ds,dG,dM)}dk(dC,dB,dG,dM);var dF=dN.join(p.urlParamSeparator);dF=bt(dF);var dK=0;try{for(var dI in bV){if(p.useKey){dK+=bV[dI].length+3+p.urlParamSeparator.length}else{dK+=dI.length+3+p.urlParamSeparator.length}}}catch(dL){dK=12}dK--;var dA=p.maxLogLineLength-dK-dF.length-3-p.beaconUrl.length;if(dA<=0){dA=4780-dK-dF.length-3-p.beaconUrl.length}var dH=[];var dE="";if(dA>0){if(dG.length>0){var dJ;var dt="";var dw="";for(dJ=0;dJ<dG.length;dJ++){dw=bt(dG[dJ]);if(dw.length>=dA){dH.push(dw)}else{if(dt.length+dw.length<=dA){if(dt){dt+=p.urlParamSeparator+dw}else{dt=dw}}else{dH.push(dt);dt=""}}}if(dt!=""){dH.push(dt)}}var du=dH.length;if(du>1){for(var dD=1;dD<=du;++dD){dE=dF+p.urlParamSeparator;dE+=((p.useKey?bV.partNumber:"partNumber")+"="+dD)+p.urlParamSeparator;dE+=((p.useKey?bV.totalParts:"totalParts")+"="+du)+p.urlParamSeparator;dE+=dH[dD-1];dE+=p.urlParamSeparator;if(bJ[dy]){aF(dE,dx,dC)}}}else{dE=dF+p.urlParamSeparator+dH[0]+p.urlParamSeparator;aF(dE,dx,dC)}}else{var dz=dG.join(p.urlParamSeparator);dz=bt(dz);dE=dF+p.urlParamSeparator+dz+p.urlParamSeparator;if(bJ[dy]){aF(dE,dx,dC)}}}catch(dL){bQ("Exception, get beacon Strings:"+dL)}}function cv(e){bA.fLineCount=0;var ds=cX(e);bA.akamai=ds;bA.akamai.customDataPopulated=false}function y(){try{var dw="socialShare:";var ds=dw.length;var dt=bA.socialSharingObj;for(var du in bk){if(du.indexOf(dw)!=-1){if(du in bA.dataSent){if(bA.dataSent[du].count<bA.socialShareLimit){++bA.dataSent[du].count;if(dt==null){dt[du.substring(ds)]=bk[du]}else{if(du.substring(ds) in dt){dt[du.substring(ds)]=parseInt(dt[du.substring(ds)])+parseInt(bk[du])}else{dt[du.substring(ds)]=bk[du]}}}}else{bA.dataSent[du]={};bA.dataSent[du].value=bk[du];bA.dataSent[du].count=1;dt[du.substring(ds)]=bk[du]}delete bk[du]}}bA.socialSharingObj=dt}catch(dv){bQ("Exception,  getFeedbackObj"+dv);bA.socialSharing=null}}function dl(dt){try{var dv=null;if(bA.socialSharingObj!=null){for(var ds in bA.socialSharingObj){if(dv==null){dv=ds+":"+bA.socialSharingObj[ds]+","}else{dv+=ds+":"+bA.socialSharingObj[ds]+","}}}if(dv!=null){dt.socialSharing=dv.substring(0,dv.length-1)}}catch(du){bQ("Exception,  getFeedbackData"+du);dt.socialSharing=null}bA.socialSharingObj={}}function bT(du){try{for(var dt in bJ){if(bJ[dt]){for(var ds=0;ds<bJ[dt].length;ds++){if(bJ[dt][ds].fallback&&!bk[bJ[dt][ds].name]){c5(du,bJ[dt][ds].name,bJ[dt][ds].fallback)}}}}}catch(dv){}}function ba(dt){try{var ds=Z.streamName?Z.streamName:dt.streamName}catch(du){}try{if(bk.title){dt.title=bk.title}else{dt.title=bk.eventName?bk.eventName:ds}if(bk.eventName){dt.eventName=bk.eventName}else{dt.eventName=bk.title?bk.title:ds}}catch(du){bQ("Exception,  getting title and eventName, "+du)}}function bf(dx,dA,du,ds){bQ("updating metrics for playing and end events");var dw=dx.akamai;var dy=0;var dz=dw.playerState;var dt=true;dw.currentStreamTime=parseInt(aH(dx));switch(dw.currentState.state){case cH.playing:dw.playerState="PL";if(dA-dw.seekTime>0){dw.updatePlayClockTime(dA-dw.seekTime,dw.currentState.lastEventClockTime,du)}if(dw.playClockTime<0){dw.playClockTime=0}dw.updatePlayed(dw.currentStreamTime);break;case cH.pause:dw.pauseDuration+=dA;dw.playerState="PS";break;case cH.rebuffering:if(!dw.wasPutToSleep){dw.rebufferTime+=dA;dw.curRebufferTime+=dA;W(dw,du);dw.playerState="B";dy=du-dw.curRebufferTime;break}case cH.resumeBuffering:dw.playerState="RB";dw.resumeBufferTime+=dA;break;case cH.ended:dw.updatePlayed(dw.currentStreamTime);break;case cH.seek:if((du-dw.currentState.timeUpdateClockTime)>0){aA(dw,du,dw.currentStreamTime,"S")}dw.currentState.timeUpdateClockTime=du;dw.playerState="SK";break;default:dt=false;break}if(dw.playerState==="B"){dw.continuousRebufferDuration+=dw.curRebufferTime}else{dw.continuousRebufferDuration=0}cn.getTransitionSession(dw);aA(dw);if(dw.rebufferSession){cK(dw,dz);dw.firstRebufferStartEpoch=dy}if(dw.playClockTime>5000){dw.isView=1}if(dt){dw.currentState.lastEventClockTime=du}dw.bytesLoaded=cl(dx);if(dw.played){var e=dw.played;dw.playStreamTime=0;for(var dv=0;dv<e.length;dv++){dw.playStreamTime+=parseInt(e[dv][1]-e[dv][0])}if(dw.logType=="R"){dw.playStreamTime-=dw.lastPlayStreamTime;dw.lastPlayStreamTime+=dw.playStreamTime}}if(ds&&dw.endReasonCode!="Browser.Close"&&!dw.streamTitleSwitchReason){dw.playerState="E"}}function dd(du){try{var ds="-";if(document&&document.referrer){var dt=document.referrer;dt=dt.split("/",3);if(dt&&dt[2]){ds=dt[2]}}if(window==window.top){du.pageUrl=bk.pageUrl?bk.pageUrl:document.URL;du.pageHost=(bk.pageUrl&&aD(bk.pageUrl))?aD(bk.pageUrl):document.location.hostname;du.pageReferrer=bk.pageReferrer?bk.pageReferrer:(document.referrer?document.referrer:"-");du.pageReferrerHost=(bk.pageReferrer&&aD(bk.pageReferrer))?aD(bk.pageReferrer):(document.referrer?ds:"-")}else{du.pageUrl=bk.pageUrl?bk.pageUrl:(document.referrer?document.referrer:"-");du.pageHost=(bk.pageUrl&&aD(bk.pageUrl))?aD(bk.pageUrl):(document.referrer?ds:"-");du.pageReferrer=bk.pageReferrer?bk.pageReferrer:"NA";du.pageReferrerHost=(bk.pageReferrer&&aD(bk.pageReferrer))?aD(bk.pageReferrer):"NA"}}catch(dv){}}function a9(dt){try{var ds;for(ds in Z){if((ds!="viewerId")&&(ds!="clientId")&&(ds!="viewerDiagnosticsId")&&(ds!="pluginVersion")){dt[ds]=Z[ds]}}if("pluginVersion" in Z){dt.pluginVersion=b1+":"+Z.pluginVersion}}catch(du){}}function cM(dv,du){bQ("populate custom data, eventCode = "+du);try{dd(dv);dv.deliveryType=cI(dv);dv.device=bk.device?bk.device:a2;if(du=="playing"||du=="complete"||du=="feedback"||du=="error"){dl(dv);if((dv.socialSharing==null||dv.socialSharing=="")&&du=="feedback"&&(!dv.customDataChanged)){--bA.fLineCount;return}}var dt;for(dt in bk){if((dt!="viewerId")&&(dt!="clientId")&&(dt!="viewerDiagnosticsId")){if(!(dt in cs)){dv[dt]=bk[dt]}}}if(cf&&cf.akamai){for(var ds in cf.akamai){dv[ds]=cf.akamai[ds]}}ba(dv);dv.cdn=aQ(dv)}catch(dw){bQ("Exception,  populate Custom Data , "+dw)}}function v(dA,dx,dz,dv){try{bQ("sendBeacon: eventCode = "+dx+", clocktime = "+dv);var dw=dA.akamai;var dD=dv-dw.currentState.lastEventClockTime;if(dx!="init"){dw.logInterval=(dw.lastLogTime<=0)?"0":(dv-dw.lastLogTime)/1000}else{dw.logInterval="0"}if(!dw.customDataPopulated){cM(dw,dx)}dw.serverIp=(cG.serverip)?cG.serverip:"-";dw.fastTCP=(c.ftcp)?c.ftcp:"-";dw.eventCode=an[dx];if(dw.hLineSentCount>0){dw.lastHTime=(dv-dw.lastHLineSentTime)/1000}else{dw.lastHTime=(dv-dw.lastSLineSentTime)/1000}if(dx=="heartBeat"){var dC=dw.logInterval;dw.logInterval=(dv-dw.lastPLineSentTime)/1000;cx(dw,dv)}if(dw.logInterval<0){dw.logInterval="0"}var du=false;if(dx=="complete"){dx="playing";du=true}dw.endOfStream=du?"1":"0";dw.currentClockTime=dv-dw.startTimer;dw.currentStreamTime=parseInt(aH(dA));if(dx=="playing"&&!dw.playEndMetricsUpdated){if(du){cx(dw,dv)}bQ("send Beacon, updating play and end metrics");bf(dA,dD,dv,du);aL(dA)}if(!dw.customDataPopulated){bT(dw)}a9(dw);if(!cJ){var dB=cX(dw);var ds={element:dB,code:(du)?"complete":dx,synch:dz};c3.push(ds);if(dx=="playing"||dx=="playStart"){dw.clearRelativeMetrics()}if(dx!="heartBeat"){bQ("send beacon :configurationPopulated false sequenceId = "+dw.sequenceId);++dw.sequenceId;dw.lastLogTime=dv}else{dw.logInterval=dC}return}if(dx=="playStart"){a4()}dw.populateMetricsFromConfiguration();dw.xViewerId=cq.xViewerId;dw.xViewerIdVersion=cq.xViewerIdVersion;if(typeof akaMediaAnalytics!="undefined"&&akaMediaAnalytics!=null){var dt=akaMediaAnalytics.getStream();if(dt){dw.bandwidth=dt.getBandwidthFromFragments();bQ("reporting bandwidth = "+dw.bandwidth);dt.cleanupFragments()}}if(du){b7(dw,"complete",dz)}else{b7(dw,dx,dz)}dw.qualityOfExperience=null;du=false;if(dx=="playing"||dx=="playStart"){dw.clearRelativeMetrics()}if(dx!="heartBeat"){++dw.sequenceId;dw.lastLogTime=dv}else{dw.logInterval=dC}}catch(dy){bQ("Exception, send beacon:"+dy)}}function cX(dt,dv){var dv=dv||{};try{for(var ds in dt){if((typeof dt[ds]==="object")&&(dt[ds])){dv[ds]=(dt[ds].constructor===Array)?[]:{};cX(dt[ds],dv[ds])}else{dv[ds]=dt[ds]}}return dv}catch(du){}}this.logMessage=function(ds,e){bQ(ds,e)};function bQ(dy,du){try{if(O.configURLCsmaDebug==1||O.pageURLCsmaDebug==1||O.configDebug==1){try{if(O.printException){if(dy.indexOf("Exception")!=-1){du="ERROR"}}}catch(dx){}var dv=[];dv[0]={message:dy,type:du,time:ah()};var ds={logMessage:dv,type:"log"};try{if(typeof aB!="undefined"){aB.processLogs({api:"reportLogs",value:ds})}else{bG.push({api:"reportLogs",value:ds})}}catch(dt){bG.push({api:"reportLogs",value:ds})}try{console.log(dy)}catch(dt){}}else{if(!cJ){var dw={message:dy,msgType:du};A.push(dw)}}}catch(dt){}}function X(dt,e){if(e==null||e==""){e="TRACE"}if(dt==null||dt==""){return}if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){AkamaiAnalytics_debugWindow_appendLog(dt,e)}else{var ds={message:dt,msgType:e};A.push(ds)}}function by(){try{if(O.configURLCsmaDebug==1||O.pageURLCsmaDebug==1||O.configDebug==1){if(O.logStoredMsg){if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){if(O.logTimer){b5(O.logTimer)}O.logStoredMsg=false;if(A.length){for(var ds=0;ds<A.length;ds++){bQ(A[ds].message,A[ds].msgType)}A=[]}}else{O.logTimer=b2(by,1000,[])}}}}catch(dt){}}var bo,a,ag;var ct="AkamaiAnalytics_BrowserSessionId";var bL=null;var aM=null;var b6=null;var cP=null;var c1=null;var a2=null;var br=null;if(navigator&&navigator.userAgent){br=navigator.userAgent}function cC(){if(navigator&&navigator.userAgent){try{var e=navigator.userAgent;var dv=/\((\w+)/;var dt=dv.exec(e);aM=dt[1].toLowerCase();if(e.indexOf("Xbox")!=-1){aM="Xbox"}else{if(aM.indexOf("compatible")!=-1||aM.indexOf("windows")!=-1||aM.indexOf("mobile")!=-1){aM="Windows"}else{if(aM.indexOf("x11")!=-1){aM="Linux"}else{if(aM.indexOf("macintosh")!=-1||aM.indexOf("mac os")!=-1||aM.indexOf("macos")!=-1){aM="Mac OS"}else{if(aM.indexOf("ipad")!=-1){aM="iPad"}else{if(aM.indexOf("iphone")!=-1){aM="iPhone"}else{if(aM.indexOf("ipod")!=-1){aM="iOS"}else{if(e.indexOf("Android")!=-1){aM="Android"}else{if(e.indexOf("PlayStation 4")!=-1){aM="PlayStation 4"}else{if(e.indexOf("PLAYSTATION 3")!=-1){aM="PlayStation 3"}else{aM="Others"}}}}}}}}}}}catch(du){bQ("Exception,  finding Osname");aM="Others"}b6=aM;try{dv=/(NT|Phone|OS X|Linux|CPU.*?OS) ([0-9\._]+)/;dt=dv.exec(e);if(dt&&dt.length>2){c1=dt[2]?dt[2]:"";if(c1){b6+=" "+c1}var ds=null;if(aM=="Windows"){ds=bc(c1);aM=aM+" "+ds}}}catch(du){bQ("Exception,  OSVersion"+du)}}}function bc(ds){var dt=null;if(ds){if(ds=="6.3"||ds=="6.2"){dt="8"}else{if(ds=="6.1"){dt="7"}else{if(ds=="6.0"){dt="Vista"}else{if(ds=="5.2"||ds=="5.1"){dt="XP"}else{var e=ds.split(".");if(parseInt(e[0])>=8){dt=e[0]}else{dt="Other"}}}}}}return dt}function Q(){if(navigator&&navigator.userAgent){var e=navigator.userAgent;var dw=/(MSIE|Chrome|Version|Firefox)[ \/]([0-9]+)/;try{var dt=dw.exec(e);bL=dt[1];if(dt[1]=="Version"){dw=/(Opera|Safari)/;var dy=dw.exec(e);bL=dy[1]}}catch(dv){bQ("Exception,  browserName"+dv)}try{bQ("browser version = "+dt[2]);var ds=e.indexOf("Edge");if(ds!=-1){uagentLength=e.length;var dx=e.substr(ds,uagentLength-ds);var du=dx.split("/");bL=du[0];cP=du[1]}else{cP=dt[2]}if(bL&&cP){bL=bL+" "+cP}}catch(dv){bQ("Exception,  browserVersion"+dv)}}}function bS(){if(navigator&&navigator.userAgent){try{var ds=navigator.userAgent;ds=ds.toLowerCase();if(ds.indexOf("ipad")!=-1){a2="iPad"}else{if(ds.indexOf("ipod")!=-1){a2="iPod"}else{if(ds.indexOf("iphone")!=-1){a2="iPhone"}else{if(ds.indexOf("android")!=-1){a2="Android Device"}else{if(ds.indexOf("xbox")!=-1){a2="Xbox"}else{if(ds.indexOf("macintosh")!=-1||ds.indexOf("windows")!=-1||ds.indexOf("compatible")!=-1){a2="Desktop"}else{if(ds.indexOf("playstation 4")!=-1){a2="PlayStation 4"}else{if(ds.indexOf("playstation 3")!=-1){a2="PlayStation 3"}else{a2="Others"}}}}}}}}}catch(dt){bQ("Exception,  getitng device name : "+dt);a2="Others"}}}cC();Q();bS();var cH={ended:0,init:1,playing:2,pause:3,seek:4,rebuffering:5,resumeBuffering:6};function cT(ds){try{switch(ds){case cH.ended:return"ended";break;case cH.init:return"init";break;case cH.playing:return"playing";break;case cH.pause:return"pause";break;case cH.seek:return"seek";break;case cH.rebuffering:return"rebuffering";break;case cH.resumeBuffering:return"resumeBuffering";break;default:return"undefined";break}}catch(dt){}}var bR=[0,0,0,0,0,0,0,0,0,0,0,0];var G=[0,0,0,0,0,0,0,0,0,0,0,0];var g;var aE="0,0,0,0,0,0,0,0";function bb(e){if(e&&e.customMetrics){for(var ds in e.customMetrics){if(!(ds in cs)){this[ds]=e.customMetrics[ds]}}}this.userAgent=br;this.playerType="HTML5";if(x!=null&&bX!=null){this.pluginVersion="JS-"+b1+":"+x+"-"+bX}else{if(aJ.objectBased){this.pluginVersion="JS-"+b1}else{this.pluginVersion="HTML5-"+b1}}this.os=aM;this.fullOs=b6;this.osVersion=c1;this.browser=bL;this.browserVersion=cP;this.browserSize=window.innerWidth+"x"+window.innerHeight;this.rebufferCount=0;this.bytesLoadedCallback=0;this.lastBytesLoaded=0;this.currRebufferEndEpoch=0;this.totalPlayClockTime=0;this.totalPlayStreamTime=0;this.totalRebufferCount=0;this.totalRebufferTime=0;this.totalPauseCount=0;this.totalPauseDuration=0;this.totalSeekCount=0;this.totalSeekTime=0;this.totalResumeBufferCount=0;this.totalResumeBufferTime=0;this.totalAdPlayClockTime=0;this.totalAdStartCount=0;this.totalAdAbandonCount=0;this.updateTerminateMetrics=function(){try{if(this.playClockTime){this.totalPlayClockTime+=parseInt(this.playClockTime)}if(this.playStreamTime){this.totalPlayStreamTime+=parseInt(this.playStreamTime)}if(this.rebufferCount){this.totalRebufferCount+=parseInt(this.rebufferCount)}if(this.rebufferTime){this.totalRebufferTime+=parseInt(this.rebufferTime)}if(this.pauseCount){this.totalPauseCount+=parseInt(this.pauseCount)}if(this.pauseDuration){this.totalPauseDuration+=parseInt(this.pauseDuration)}if(this.seekCount){this.totalSeekCount+=parseInt(this.seekCount)}if(this.seekTime){this.totalSeekTime+=parseInt(this.seekTime)}if(this.resumeBufferCount){this.totalResumeBufferCount+=parseInt(this.resumeBufferCount)}if(this.resumeBufferTime){this.totalResumeBufferTime+=parseInt(this.resumeBufferTime)}if(this.adPlayClockTime){this.totalAdPlayClockTime+=parseInt(this.adPlayClockTime)}if(this.adCount){this.totalAdStartCount+=parseInt(this.adCount)}if(this.adAbandonCount){this.totalAdAbandonCount+=parseInt(this.adAbandonCount)}var dt=cb();this.startupAbondonWaitTime=dt;this.playInterval=dt}catch(du){bQ("Unable to update cumulative metrics")}};this.clearRelativeMetrics=function(){var dt=["rebufferCount","rebufferTime","playClockTime","playStreamTime","seekCount","seekTime","pauseCount","pauseDuration","resumeBufferCount","resumeBufferTime","averagedBitRate","transitionUpSwitchCount","transitionDownSwitchCount","rebufferSession","curRebufferTime","adCount","adPlayClockTime","adStartupTime","adAbandonCount","adPauseTime"];this.updateTerminateMetrics();for(var du=0;du<dt.length;++du){this[dt[du]]=0}this.pauseIntervalsAsString="-";this.seekIntervalsAsString="-";this.pauseSeekSession="-";this.transitionStreamTimeSession="-";this.socialSharing=null;this.adSession=null;bA.socialSharing=null;bA.socialSharingObj={};cn.bitRateArr=[];delete this.rebufferSession};this.populateMetricsFromConfiguration=function(){this.beaconId=a0.beaconId;this.beaconVersion=a0.beaconVersion;this.logType=(p.logType=="relative")?"R":"C";this.logVersion=p.logVersion;this.startupTimeOutlierLimit=p.startupTimeOutlierLimit;this.formatVersion=p.formatVersion;this.bucketCount=cA.bucketCount;this.bucketLength=cA.bucketLength;for(var du in bJ){if(bJ[du]){for(var dt=0;dt<bJ[du].length;dt++){if(bJ[du][dt].value){this[bJ[du][dt].name]=bJ[du][dt].value}}}}};this.initPlayed=function(dt){this.played.push([dt,dt]);this.playingIndex=0};this.updatePlayClockTime=function(du,dt,dv){this.playClockTime+=du;cn.updateBitRateArr(du)};this.updatePlayed=function(dt,dw){var dv=this.played;if(!dv){return}for(var du=0;du<dv.length;du++){}for(var du=this.playingIndex;du<dv.length&&dt>dv[du][0];du++){}if(du!=this.playingIndex){dv[this.playingIndex][1]=Math.max(dt,dv[du-1][1]);dv.splice(this.playingIndex+1,du-this.playingIndex-1)}else{dv[this.playingIndex][1]=Math.max(dt,dv[this.playingIndex][1])}if(dw==null){return}for(du=0;du<dv.length;du++){if(dv[du][0]<=dw&&dv[du][1]>=dw){this.playingIndex=du;return}else{if((du+1)<dv.length&&dv[du][1]<dw&&dv[du+1][0]>dw){du++;this.playingIndex=du;dv.splice(du,0,[dw,dw]);return}}}if(du==dv.length){dv.push([dw,dw]);this.playingIndex=du}};this.isVisitEnd=0;this.sequenceId="0";this.isSLineSent=false;this.sendVLine=false;this.played=[];this.iLineCount=0;this.isPlaylist=false;this.isFirstTitle=1;this.currentState={state:cH.ended,lastEventClockTime:0,pauseStartStreamTime:0,pauseStartClockTime:0,timeUpdateStreamTime:0,timeUpdateClockTime:0,pollingTimerStreamTime:0,seekStartStreamPos:0};this.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1};this.clearRelativeMetrics();bQ("value of configurationPopulated"+cJ);if(cJ){this.populateMetricsFromConfiguration()}this.loadStartILine=false;this.canPlayUpdated=false;this.canPlayEventAutoPlay=true;this.format="P";this.playerFormat=this.playerType+":"+this.format;this.deliveryType="O";this.firstTimeProgress=true;this.firstTimePlay=true;this.isILineSent=false;this.seekFrom=0;this.lastPlayStreamTime=0;this.lastPlayLogTime=0;this.lastLogTime=0;this.curRebufferTime=0;this.sendIsSessionWithRebufferH=1}aJ.akamai=new bb(aJ);function cO(){try{var dt,ds;for(dt in bJ){if(bJ[dt]){for(ds=0;ds<bJ[dt].length;ds++){if(bJ[dt][ds].isSent&&bJ[dt][ds].isSent===true){bJ[dt][ds].isSent=false}}}}}catch(du){}}function bg(dw){bQ("endOfTheSession");var dv=dw.akamai;var dx=dv.isPlaylist;var dt=dv.visitId;var e=dv.viewerId;var du=dv.streamName;var dz=dv.cdn;var dy=dv.sendVLine;var ds=dv.iLineCount;dw.akamai=null;cO();dv=dw.akamai=new bb(dw);dv.visitId=dv.browserSessionId=dt;dv.viewerId=dv.clientId=e;dv.cdn=dz;aP=-1;dv.streamName=du;dv.iLineCount=ds;dw.akamai.clearVisitTimeoutId=b2(c4,p.visitTimeout,[dw,1]);dv.sendVLine=dy;dv.isPlaylist=dx;if(dw.played){dw.played.length=0}cn.clearBitRate()}var cp=["UNKNOWN","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];function b4(e){if(cr&&cr.dataset&&cr.dataset.isad&&cr.dataset.isad=="true"){return true}else{return false}}function cd(dt,ds,dw,dv){if(ds=="playing"){cE=[]}var du={};du.eventType=ds;du.eventTime=dv;if(dw){du.streamUrl=dw}if(ds=="error"){du.errorCode=bn(dt)}if(cE&&cE.length>0){var e=cE[cE.length-1];if(e.eventType==du.eventType&&e.streamUrl==du.streamUrl){if(ds=="error"){e.errorCode=du.errorCode}e.eventTime=du.eventTime}else{cE.push(du)}}else{cE.push(du)}}function S(ds,dz,dy,du){try{var dx=false;if(cE.length>0){var dt=cE[cE.length-1];bQ("check error events array, previous event is : "+dt.eventType);if(dt.eventType=="error"&&dy==dt.streamUrl){if(dz=="error"){var dw=bn(ds);if(dt.errorCode==dw){dx=true}else{dx=false}dt.eventTime=du;dt.errorCode=dw}else{if(dz=="play"&&dt.eventTime&&(du-dt.eventTime<=2000)){dx=true}}}}}catch(dv){bQ("Exception,  checkErrorEventsArray"+dv);dx=false}return dx}function bH(dt){if(b4(dt)){bQ("handle Seeking Event : video tag is of type AD, return");return}try{var dv=cb();var ds=parseInt(aH(dt));var dx=dt.akamai;var du=dx.currentState;var dA=dv-du.lastEventClockTime;var dw=dv-dx.startTimer;var dy=du.state;if(du.state==cH.playing){dx.updatePlayClockTime(dA,du.lastEventClockTime,dv)}if(dx.isPlaylist&&(du.state==cH.ended)&&(dx.browser=="Safari")){}du.lastEventClockTime=dv}catch(dz){bQ("Exception,  handle Seeking Event : "+dz)}}function ac(dt,dv,ds){if(b4(dt)){bQ("handle Seeked Event : video tag is of type AD, return");return}try{if(!dv){dv=cb()}if(!ds){ds=parseInt(aH(dt))}var dx=dt.akamai;var du=dx.currentState;var dA=dv-du.lastEventClockTime;var dw=dv-dx.startTimer;var dy=du.state;bQ("entered function handle Seeked Event, currentstate = "+cT(du.state));if(dy==cH.pause||dy==cH.playing||dy==cH.rebuffering||du.state==cH.seek){if((dv-du.timeUpdateClockTime)>0){aA(dx,dv,ds,"S")}switch(dy){case cH.playing:dx.updatePlayed(du.timeUpdateStreamTime,ds);du.lastEventClockTime=dv;dx.updatePlayClockTime(dA,du.lastEventClockTime,dv);du.state=cH.seek;du.seekStartStreamPos=ds;break;case cH.rebuffering:if(!dx.wasPutToSleep){bQ("handle seeked event, previous state is rebuffering");dx.rebufferTime+=dA;dx.curRebufferTime+=dA;if(dx.rebufferSessionArrayHLine){dx.rebufferSessionArrayHLine.push(dv)}try{W(dx,dv);dx.curRebufferTime=0}catch(dz){bQ("Error...Play"+dz.message)}du.lastEventClockTime=dv;du.state=cH.seek}else{bQ("Rejecting this event, because rebuffer was caused by system sleep")}break}}}catch(dz){bQ("Exception,  handle Seeked Event :"+dz)}}function ai(dt,dB){if(b4(dt)){bQ("handlePauseEvent : video tag is of type AD, return");return}try{bQ("entered function handle Pause Event");var dv=cb(dB);var ds=parseInt(aH(dt));var dz=dt.akamai;var du=dz.currentState;var dw=I(dt);if(dz.firstTimePlay||du.state==cH.pause){return}if(dw&&dw!=0&&ds&&ds!=0){if(Math.abs(dw-ds)<1000){return}}var dC=dv-du.lastEventClockTime;var dx=dv-dz.startTimer;var dy=du.state;switch(dy){case cH.playing:dz.updatePlayClockTime(dC,du.lastEventClockTime,dv);++dz.pauseCount;aA(dz,dv,ds,"P");if(dz.pauseSeekSession!="-"){dz.pauseSeekSession+=",P("+ds+":"+dx+")"}else{dz.pauseSeekSession="P("+ds+":"+dx+")"}dz.updatePlayed(ds);break;case cH.rebuffering:if(!dz.chasingSleep){++dz.pauseCount;aA(dz,dv,ds,"P");if(dz.pauseSeekSession!="-"){dz.pauseSeekSession+=",P("+ds+":"+dx+")"}else{dz.pauseSeekSession="P("+ds+":"+dx+")"}dz.rebufferTime+=dC;dz.curRebufferTime+=dC;if(dz.rebufferSessionArrayHLine){bQ("handlePauseEvent : pushing, rebufferSessionArrayHLine");dz.rebufferSessionArrayHLine.push(dv)}try{W(dz,dv);dz.curRebufferTime=0}catch(dA){bQ("Error...Pause"+dA.message)}}break}du.state=cH.pause;du.pauseStartStreamTime=ds;du.pauseStartClockTime=dv;du.lastEventClockTime=dv}catch(dA){bQ("Exception,  handlePauseEvent : "+dA)}}function b3(du,dt){try{if(aJ&&aJ.akamai){bQ("handle bit rate switch");try{du=parseInt(du)}catch(dx){bQ("Exception,bit rate to int :"+dx);return}if(isNaN(du)){bQ("handle bitrate swtich, bite rate isNaN")}var dw=aJ.akamai;var dv=dw.currentState;var ds=aH(aJ);if(cn.currentBitRate!="-"){if(du>cn.currentBitRate){dw.transitionUpSwitchCount++}else{if(du<cn.currentBitRate){dw.transitionDownSwitchCount++}}}if(dv&&dv.state==cH.playing){l(aJ,dt)}cn.currentBitRate=du;cn.currentStartPos=ds}}catch(dx){bQ("Exception, handle bit rate switch:"+dx)}}function ay(du,dz){if(b4(du)){bQ("handle Play Event : video tag is of type AD, return");return}try{var dw=cb(dz);var dD=D(du);if(du.akamai&&du.akamai.postRollTimer){bQ("handle play event: send the C line without changing set data");b5(du.akamai.postRollTimer);delete du.akamai.postRollTimer;au(du,dw)}if(S(du,"play",dD,dw)){bQ("handle play Event: play is thrown after error, return, curTime = "+dw);return}cd(du,"play",dD,dw);var dB=du.akamai;var dt=parseInt(aH(du));var dv=dB.currentState;var dE=dw-dv.lastEventClockTime;var dy=dw-dB.startTimer;var dA=dv.state;bQ("entered function handle Play Event, current state = "+cT(dv.state));switch(dA){case cH.ended:ci(dD,dB);dB.streamUrl=dD;dB.startTimer=dw;dB.streamLength=parseInt(I(du));if(dD!=null&&dD.indexOf("?")!=-1){dD=dD.substring(0,dD.indexOf("?"))}if(dD!=null&&dD!=""&&(/.m3u8$/.exec(dD))){dB.format="L";dB.playerFormat=dB.playerType+":"+dB.format;dB.deliveryType="L"}aP=-1;c9(du,false,dw);dB.currentState.state=cH.init;bQ(dw+": handlePlayBackEvent : Setting state to init");dB.currentState.timeUpdateClockTime=dw;dB.currentState.timeUpdateStreamTime=0;dB.currentState.lastEventClockTime=dw;dB.isPlaylist=true;var ds=D(du);var dx=StreamTypeDetector(ds,ar,dg,function(e){if(e){bQ("detected stream type = "+e.getStreamType());bQ("Received steam type = "+e.getStreamType()+"\n Stream URL = "+e.getStreamURL()+"\n Stream Name = "+e.getStreamName()+"\n Stream Length = "+e.getStreamLength()+"\n Stream Format = "+e.getStreamFormat()+"\n Stream Delivery Type = "+e.getDeliveryType());dB.streamUrl=e.getStreamURL();dB.format=e.getStreamFormat();dB.deliveryType=e.getDeliveryType();if(e.getStreamLength()){dB.streamLength=e.getStreamLength()}dB.streamName=e.getStreamName()}});if(dx!==streamError.NoError){bQ("failed to detect stream. May be we do not have sufficient information")}break;case cH.pause:dB.pauseDuration+=dE;if(dB.pauseIntervalsAsString!="-"){dB.pauseIntervalsAsString+=","+dv.pauseStartStreamTime+":"+(dw-dv.pauseStartClockTime)}else{dB.pauseIntervalsAsString=dv.pauseStartStreamTime+":"+(dw-dv.pauseStartClockTime)}if(dB.pauseSeekSession!="-"){dB.pauseSeekSession+=",R("+dv.pauseStartStreamTime+":"+dy+")"}else{dB.pauseSeekSession="R("+dv.pauseStartStreamTime+":"+dy+")"}dB.updatePlayed(dv.pauseStartStreamTime,dt);dB.currentState.lastEventClockTime=dw;++dB.resumeBufferCount;dv.state=cH.resumeBuffering;break;case cH.init:if(!dB.iLineSentTime){dB.iLineSentTime=dw}if(dB.loadStartILine&&!dB.canPlayEventAutoPlay&&!dB.canPlayUpdated){dB.iLineSentTime=dw;dB.canPlayUpdated=true}break}}catch(dC){bQ("Exception,  handle Play Event:"+dC)}}function l(du,ds){if(b4(du)){bQ("handle Playing Event : video tag is of type AD, return");return}try{var dw=cb(ds);var dB=D(aJ);cd(du,"playing",dB,dw);var dt=parseInt(aH(du));var dz=du.akamai;var dv=dz.currentState;var dC=dw-dv.lastEventClockTime;var dx=dw-dz.startTimer;var dy=dv.state;bQ("entered function handle Playing Event, current State = "+cT(dv.state));switch(dy){case cH.rebuffering:if(!dz.wasPutToSleep){dz.rebufferTime+=dC;dz.curRebufferTime+=dC;dz.continuousRebufferDuration=0;if(dz.rebufferSessionArrayHLine){dz.rebufferSessionArrayHLine.push(dw)}try{W(dz,dw);dz.curRebufferTime=0}catch(dA){bQ("Error...Play"+dA.message)}}break;case cH.pause:case cH.resumeBuffering:dz.resumeBufferTime+=dC;if(dC==0&&dz.resumeBufferCount>0){--dz.resumeBufferCount}break;case cH.init:w(du,dC,dw,dt);cn.currentStartPos=dt;break;case cH.ended:bQ("handle Playing Event : dispatch play and playing event");ay(du,dw);l(du,dw);break;case cH.playing:dz.updatePlayClockTime(dC,dv.lastEventClockTime,dw);break;case cH.seek:if((dw-dv.timeUpdateClockTime)>0){aA(dz,dw,dt,"S");dz.updatePlayed(dv.seekStartStreamPos,dt)}break}dv.state=cH.playing;dv.lastEventClockTime=dw}catch(dA){bQ("Exception,  handle Playing Event:"+dA)}}function J(du,dt){if(b4(du)){bQ("handleWaitingEvent : video tag is of type AD, return");return}try{var dz=du.akamai;if(dz.currentState.state==cH.rebuffering){bQ("already inside handleWaiting Event");return}var dw=cb(dt);var ds=parseInt(aH(du));var dv=dz.currentState;var dB=dw-dv.lastEventClockTime;var dx=dw-dz.startTimer;var dy=dv.state;bQ("entered function handle Waiting Event, current state = "+cT(dv.state));switch(dy){case cH.playing:dz.updatePlayClockTime(dB,dv.lastEventClockTime,dw);++dz.rebufferCount;if(dz.rebufferCount==1&&dz.playerState!="B"){dz.firstRebufferStartEpoch=Math.round(dw)}if(dz.rebufferSessionArrayHLine){bQ("handleWaitingEvent : pushing, rebufferSessionArrayHLine"+dw);dz.rebufferSessionArrayHLine.push(dw)}dz.updatePlayed(ds);dv.state=cH.rebuffering;break;case cH.pause:++dz.resumeBufferCount;dv.state=cH.resumeBuffering;break;case cH.init:break}dv.lastEventClockTime=dw;bQ("handle waiting event, if seek starts, stream pos = "+ds);dv.seekStartStreamPos=ds}catch(dA){bQ("Exception,  handleWaitingEvent:"+dA)}}function u(e){if(b4(e)){bQ("handleAbortEvent : video tag is of type AD, return");return}U(e)}function U(dt){if(b4(dt)){bQ("handle Error Event : video tag is of type AD, return");return}try{var dv=cb();var dC=D(dt);var dB=bn(dt);if(S(dt,"error",dC,dv)){bQ("handle Error Event: consecutive error events thrown, return, curTime = "+dv);return}if(dt&&dt.akamai&&!dt.akamai.isILineSent){bQ("handle Error Event: calling handle Play Event");ay(dt,dv)}cd(dt,"error",dC,dv);var ds=parseInt(aH(dt));var dy=dt.akamai;var du=dy.currentState;var dD=dv-du.lastEventClockTime;var dw=dv-dy.startTimer;var dx=du.state;bQ("entered function handle Error Event, current state = "+cT(du.state));if(du.state==cH.playing){dy.updatePlayClockTime(dD,du.lastEventClockTime,dv)}if(dy.isELineSent||dy.isCLineSent){return}h(dt,dB,dv);du.state=cH.ended;var dA=parseInt(F("HTML_LastCLineTime"));bg(dt);du.lastEventClockTime=dv}catch(dz){bQ("Exception,  handleErrorEvent:"+dz)}}function b0(dv,dt){if(b4(dv)){bQ("handle Ended Event WithDelay : video tag is of type AD, return");return}try{var dy=dv.akamai;var du=dy.currentState;bQ("entered function handle Ended Event WithDelay, current state"+cT(du.state));var dx=cb(dt);var dw=aj(dv);var ds=dx-du.lastEventClockTime;if(dy.pollingTimer){b5(dy.pollingTimer)}if(cf&&cf.retryTimer){b5(cf.retryTimer)}if(dy.hLineTimer){b5(dy.hLineTimer)}if(dy.fastTCPServerIpTimer){b5(dy.fastTCPServerIpTimer)}if(dy.firstPLineTimer){b5(dy.firstPLineTimer)}if(cf&&cf.retryTimer){b5(cf.retryTimer)}if(dy.postRollTimer){bQ("handle Ended Event WithDelay: postRollTimer already started return");return}cM(dy,"complete");a9(dy);bT(dy);dy.postRollTimer=b2(au,1000,[dv]);cv(dy);dy.customDataPopulated=true;cx(dy,dx);bf(dv,ds,dx,true);dy.playEndMetricsUpdated=true}catch(dz){bQ("Exception,  handle Ended Event WithDelay"+dz);au(dv,dx)}}function au(dt,dy){try{var dA=dt.akamai;if(dA.postRollTimer){b5(dA.postRollTimer);delete dA.postRollTimer}if(dA.isELineSent||dA.isCLineSent){bQ("handle Ended Event : already sent C line, return");return}var dw=cb(dy);var ds=parseInt(aH(dt));var du=dA.currentState;var dD=dw-du.lastEventClockTime;var dx=dw-dA.startTimer;var dz=du.state;bQ("entered function handle Ended Event, current state"+cT(du.state));if(!dA.playEndMetricsUpdated){bf(dt,dD,dw,true);dA.playEndMetricsUpdated=true}du.state=cH.ended;var dv=aj(dt);if(dA.streamTitleSwitchReason!=null&&dA.streamTitleSwitchReason!=""){dv=dA.streamTitleSwitchReason}bO(dt,dv,false,dw);var dC=parseInt(F("HTML_LastCLineTime"));bg(dt);du.lastEventClockTime=dw}catch(dB){bQ("Exception,  handle Ended Event :"+dB)}}this.getViewerId=function(){try{var ds=aJ.akamai;if(ds&&ds.viewerId){return ds.viewerId}else{return null}}catch(dt){return null}};this.setData=function(ds,dt){bm(ds,dt);if(de&&aJ.objectBased){var e={methodName:"setData"};e[ds]=dt;this.processLogs({api:"reportAPI",value:e})}};this.handleStreamSwitch=function(){cL();if(de&&aJ.objectBased){bQ("handleStreamSwitch()","API");var e={methodName:"handleStreamSwitch"};this.processLogs({api:"reportAPI",value:e})}};this.handleTitleSwitch=function(ds){cU(ds);if(de&&aJ.objectBased){bQ("handleTitleSwitch()","API");var e={methodName:"handleTitleSwitch",customData:ds};this.processLogs({api:"reportAPI",value:e},dp)}};this.handleFeedbackEvent=function(){aI()};this.handleApplicationExit=function(){a3();if(de&&aJ.objectBased){bQ("handleApplicationExit()","API");var e={methodName:"handleApplicationExit"};this.processLogs({api:"reportAPI",value:e})}};this.enableServerIpLookUp=function(){a8=true;if(de&&aJ.objectBased){bQ("enableServerIpLookUp()","API");var e={methodName:"enableServerIpLookUp"};this.processLogs({api:"reportAPI",value:e})}};this.disableServerIpLookUp=function(){a8=false;if(de&&aJ.objectBased){bQ("disableServerIpLookUp()","API");var e={methodName:"disableServerIpLookUp"};this.processLogs({api:"reportAPI",value:e},dp)}};this.enableLocation=function(ds){bx(ds);if(de&&aJ.objectBased){bQ("enableLocation("+ds+")","API");var e={methodName:"enableLocation",enable:ds};this.processLogs({api:"reportAPI",value:e})}};this.enableManifestRequest=function(e){dg=e};this.setURLManifest=function(e){ar=e};function bi(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e&&e.type){aJ.akamai.connectivity=e.type}}function bx(ds){if(ds){if(navigator.geolocation&&am==null){am=navigator.geolocation.watchPosition(bw,b8);var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e&&e.type){aJ.akamai.connectivity=e.type;e.addEventListener("typechange",bi)}}}else{if(navigator.geolocation&&am!=null){navigator.geolocation.clearWatch(am);am=null;e.removeEventListener("typechange",bi)}}}function bw(e){if(e&&e.coords){aJ.akamai.latitude=e.coords.latitude;aJ.akamai.longitude=e.coords.longitude}}function b8(ds){var e="";switch(ds.code){case ds.PERMISSION_DENIED:e="User denied the request for Geolocation.";break;case ds.POSITION_UNAVAILABLE:e="Location information is unavailable.";break;case ds.TIMEOUT:e="The request to get user location timed out.";break;case ds.UNKNOWN_ERROR:e="An unknown error occurred.";break}bQ("Location Error : ",e)}function bm(ds,dt){try{if(aJ&&aJ.akamai&&aJ.akamai.isSLineSent){bQ("setData() API called after 'Start Of Play' for dimension -> "+ds+"|All custom dimensions should be set before the play is initiated.","WARN")}else{bQ("setData("+ds+":"+dt+")","API")}if(ds=="customDataObject"){ce(dt)}else{if(ds=="customDataFunction"){bz=dt}else{try{if(dt!=null){dt=dt.trim()}}catch(du){}if(ds=="viewerId"||ds=="viewerDiagnosticsId"){if(dt==null||dt==""){dt="-"}}try{if(cJ){if(ds.substring(0,4)=="_cd_"){da(ds)}}}catch(du){}try{if(ds.indexOf("std:")!=-1){Z[ds.substring(4)]=dt}else{bk[ds]=dt}}catch(du){bk[ds]=dt}if((ds.indexOf("socialShare:")!=-1)||(ds.indexOf("feedback:")!=-1)){aI()}}}}catch(du){bQ("Exception, Set Data :"+du)}}function ce(ds){try{if(typeof(ds)=="object"){for(var dt in ds){bm(dt,ds[dt])}}}catch(du){bQ("Exception set custom data object"+du)}}function cL(e){var ds=aJ.akamai;ds.streamTitleSwitchReason="Stream.Switched";au(aJ,e)}function cU(du,dv){aJ.akamai.streamTitleSwitchReason="Title.Switched";var dt=aJ.akamai.isFirstTitle;au(aJ,dv);try{if(du!=null&&du!=""){for(var ds in du){bm(ds,du[ds])}}}catch(dw){bQ("Exception, handle title switch:"+dw)}aJ.akamai.isFirstTitle=dt;ay(aJ,dv);l(aJ,dv);try{aJ.akamai.currentState.timeUpdateStreamTime=parseInt(aH(aJ))}catch(dw){bQ("Exception,  handleTitleSwitch"+dw)}}function aI(){try{var dy="feedback:";var ds=dy.length;var dx=false;var dv=cb();for(var du in bk){if(du.indexOf(dy)!=-1){var dt=du.substring(ds);bk[dt]=bk[du];delete bk[du];dx=true}}y();bQ("handleFeedbackEvent");if(bA&&bA.shouldSendFLine&&bA.akamai&&(bA.akamai.isCLineSent||bA.akamai.postRollTimer)){if(dx){bA.akamai.customDataChanged=true}if(bA.fLineCount<bA.limit){v(bA,"feedback",false,dv)}++bA.fLineCount;bA.akamai.customDataChanged=false;bA.akamai.socialSharing=null}}catch(dw){bQ("Exception, handle feed back event :"+dw)}}function a3(){try{if(!aJ.objectBased){bQ("application exit, unsubscribe video events");cR(aJ)}}catch(ds){}bd()}function ao(dt){if(b4(dt)){return}try{if(ap){bQ("handle time update event, return as inside background state for idevice");return}var dv=cb(null,true);var ds=parseInt(aH(dt));var dy=dt.akamai;if(!dy){return}if(dy.postRollTimer){return}var du=dy.currentState;var dB=dv-du.lastEventClockTime;var dx=dv-dy.startTimer;var dz=du.state;var dw=ds-du.timeUpdateStreamTime;if(du.timeUpdateStreamTime!=0){if(Math.abs(dw)>=p.seekThreshold&&dy.isSLineSent){bQ("stream diff in time update is "+dw);ac(dt,dv,ds)}else{if((dw>0)&&(dw<=750)){if(dt.objectBased){if(du.state==cH.seek){l(dt)}}else{if(!dy.isSLineSent||du.state==cH.seek||du.state==cH.rebuffering){bQ("handle time update event,  dispatching playing event,  current Video state is : "+cT(du.state));l(dt)}}}}}du.timeUpdateClockTime=dv;du.timeUpdateStreamTime=ds}catch(dA){bQ("Exception,  handleTimeupddate :"+dA)}}this.handleSessionInit=function(dt,du){try{if(dt){if(typeof cF!="object"){cF={}}if(dt.streamHeadPosition){cF.streamHeadPosition=dt.streamHeadPosition}if(dt.streamLength){cF.streamLength=dt.streamLength}if(dt.streamURL){cF.streamURL=dt.streamURL}if(dt.bytesLoaded){cF.bytesLoaded=dt.bytesLoaded}if(dt.customDataFunction){cF.customDataFunction=dt.customDataFunction}if(cF.customDataFunction){bz=cF.customDataFunction}if(dt.firstBitRate){cF.firstBitRate=dt.firstBitRate}if(cF.firstBitRate){b3(cF.firstBitRate,du)}}if(de&&aJ.objectBased){setTimeout(function(dw){dw.setDiagnoserWindowLoaded(true);dw.processLogs({api:"setConfigXML",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH});var e="";e+=aJ.objectBased===true?"JS-":"HTML5-";e+=b1;if(x.length!=0&&bX.length!=0){e+=":";e+=x;e+="-";e+=bX}dw.processLogs({api:"setCurrentVersion",value:e});dw.processLogs({api:"setCustomDimension",value:Z});dw.processLogs({api:"reportSetupParams",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH});dw.processLogs({api:"reportSetupParams",value:p.beaconUrl.toLowerCase()});dw.processLogs({api:"reportSetupParams",value:m})},3000,this);bQ("handleSessionInit()","API");var ds={methodName:"handleSessionInit",callback:dt};if(typeof du!="undefined"){ds.epochTime=du}self.processLogs({api:"reportAPI",value:ds},dp)}ay(aJ,du)}catch(dv){}};this.handleBitRateSwitch=function(dt,ds){b3(dt,ds);if(de&&aJ.objectBased){bQ("handleBitRateSwitch("+dt+")","API");var e={methodName:"handleBitRateSwitch",bitRate:dt};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e})}};this.handlePlaying=function(ds){ay(aJ,ds);l(aJ,ds);if(de&&aJ.objectBased){bQ("handlePlaying()","API");var e={methodName:"handlePlaying"};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e},dp)}};this.handlePlayEnd=function(dt,ds){if(aJ.objectBased){aJ.endReason=dt}b0(aJ,ds);if(de&&aJ.objectBased){bQ("handlePlayEnd("+dt+")","API");var e={methodName:"handlePlayEnd",endReasonCode:dt};if(typeof bitRateSwitchEpochTime!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e})}};this.handleMediaChangedEvent=function(){au(aJ)};this.handlePause=function(ds){ai(aJ,ds);if(de&&aJ.objectBased){bQ("handlePause()","API");var e={methodName:"handlePause"};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e},dp)}};this.handleResume=function(ds){ay(aJ,ds);l(aJ,ds);if(de&&aJ.objectBased){bQ("handleResume()","API");var e={methodName:"handleResume"};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e})}};this.handleBufferStart=function(ds){J(aJ,ds);if(de&&aJ.objectBased){bQ("handleBufferStart()","API");var e={methodName:"handleBufferStart"};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e},dp)}};this.handleBufferEnd=function(ds){ay(aJ,ds);l(aJ,ds);if(de&&aJ.objectBased){bQ("handleBufferEnd()","API");var e={methodName:"handleBufferEnd"};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e})}};this.handleError=function(dt){try{if(aJ.objectBased){aJ.errorReason=dt}else{aJ.externalError=dt}U(aJ);if(de&&aJ.objectBased){bQ("handleError("+dt+")","API");var ds={methodName:"handleError",errorReason:dt};this.processLogs({api:"reportAPI",value:ds},dp)}}catch(du){}};this.handleTimeupdateEvent=function(){ao(aJ)};this.updateAdObject=function(e){bC(e)};this.handleAdLoaded=function(du,dt){try{bB(du,dt);if(de&&aJ.objectBased){bQ("handleAdLoaded()","API");var ds={methodName:"handleAdLoaded",adSetDataObj:du};if(typeof dt!="undefined"){ds.epochTime=dt}this.processLogs({api:"reportAPI",value:ds})}}catch(dv){}};this.handleAdStarted=function(dt,ds){a1(dt,ds);if(de&&aJ.objectBased){bQ("handleAdStarted()","API");var e={methodName:"handleAdStarted",adSetDataObj:dt};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e},dp)}};this.handleAdCompleted=function(ds){N(ds);if(de&&aJ.objectBased){bQ("handleAdCompleted()","API");var e={methodName:"handleAdCompleted"};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e})}};this.handleAdFirstQuartile=function(){dc();if(de&&aJ.objectBased){bQ("handleAdFirstQuartile()","API");var e={methodName:"handleAdFirstQuartile"};this.processLogs({api:"reportAPI",value:e},dp)}};this.handleAdMidPoint=function(){b();if(de&&aJ.objectBased){bQ("handleAdMidPoint()","API");var e={methodName:"handleAdMidPoint"};this.processLogs({api:"reportAPI",value:e})}};this.handleAdThirdQuartile=function(){cw();if(de&&aJ.objectBased){bQ("handleAdThirdQuartile()","API");var e={methodName:"handleAdThirdQuartile"};this.processLogs({api:"reportAPI",value:e},dp)}};this.handleAdStopped=function(ds){o(ds);if(de&&aJ.objectBased){bQ("handleAdStopped()","API");var e={methodName:"handleAdStopped"};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e})}};this.handleAdError=function(ds){aT(ds);if(de&&aJ.objectBased){bQ("handleAdError()","API");var e={methodName:"handleAdError"};if(typeof ds!="undefined"){e.epochTime=ds}this.processLogs({api:"reportAPI",value:e},dp)}};this.handleSetupAISEvent=function(e,ds,dt){bu(e,ds,dt)};this.getStream=function(){var e=aJ.akamai;return e.stream};this.getChildWindow=function(){return c0};this.setDiagnoserWindowLoaded=function(e){a5=e};this.isDiagnoserWindowLoaded=function(){return a5};this.getHostedUrl=function(){return dp};this.pushToMessageStore=function(e){bG.push(e)};this.getMessageStoreLength=function(){return bG.length};this.flushMessageStore=function(){bG=[]};this.getStoredMessageAt=function(e){return bG[e]};this.getShouldAnalyze=function(){return de};this.processLogs=function(dt){try{if(this.isDiagnoserWindowLoaded()){var ds=this.getMessageStoreLength();var dv=this.getChildWindow();if(dv){if(ds>0){for(i=0;i<ds;i++){dv.postMessage(this.getStoredMessageAt(i),this.getHostedUrl())}this.flushMessageStore()}dv.postMessage(dt,this.getHostedUrl())}}else{this.pushToMessageStore(dt)}}catch(du){}};function bu(ds,du,dw){try{var dt=cf.aisRequestLimit;var dv=cf.aisRequestInterval;cf=new at();cf.aisRequestInterval=dv;cf.aisRequestLimit=dt;if(!ds){bQ("return from ais, platform is null");return}cf.platform=ds;cf.version=du?du:"1.0";if(dw){cf.aisCustomDataObj=dw}cf.requestUrl="http://idp.securetve.com/rest/";cf.initUrl=cf.requestUrl+cf.version+"/"+cf.platform+"/init/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISInitRequest";cf.identityUrl=cf.requestUrl+cf.version+"/"+cf.platform+"/identity/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISIdentityRequest";cf.initUrlId="AkamaiAISInitUrl";cf.identityUrlId="AkamaiAISIdentityUrl";t(cf.initUrl,cf.initUrlId)}catch(dx){cf.requestFailed=true}}this.receiveAISInitRequest=function(du){try{cf.initObj=du;az(cf.initUrlId);if(cf.initObj==""||cf.initObj==null){cf.requestFailed=true;return}if(cf.requestFailed){return}if(cf.initObj.authenticated){cf.akamai={};cf.akamai.ais_queryToken=cf.initObj.querytoken;if(cf.initObj.idps){var dv=cf.initObj.idps;for(var ds in dv){cf.akamai.ais_idpId=ds;cf.akamai.ais_idpName=dv[ds].name;cf.akamai.ais_idpDisplayName=dv[ds].display_name;cf.akamai.ais_idpUrl=dv[ds].url}}t(cf.identityUrl,cf.identityUrlId)}else{if(!cf.requestFailed){bQ("receiveAISInitRequest, retrying the request");++cf.aisRetries;if(cf.aisRetries<cf.aisRequestLimit){cf.retryTimer=b2(t,cf.aisRequestInterval,[cf.initUrl,cf.initUrlId])}}}}catch(dt){cf.requestFailed=true}};this.receiveAISIdentityRequest=function(dt){try{cf.identityObj=dt;az(cf.identityUrlId);if(dt==null||dt==""){return}if(!cf.akamai){cf.akamai={}}if(dt.indentity&&dt.identity.aisuid){cf.akamai.ais_aisuid=dt.identity.aisuid}cV()}catch(ds){cf.requestFailed=true}};function cV(){var dt={};var dv;var du;try{if(cf&&cf.aisCustomDataObj){if(!cf.akamai){cf.akamai={}}for(var ds in cf.aisCustomDataObj){dv=cf.aisCustomDataObj[ds].split("/");if(dv[0]=="INIT"&&cf.initObj){dt=cf.initObj}else{if(dv[0]=="IDENTITY"&&cf.identityObj){dt=cf.identityObj}}if(dt){for(du=1;du<dv.length;du++){if(dv[du]&&dt[dv[du]]){dt=dt[dv[du]]}}if(typeof(dt)!="object"){cf.akamai[ds]=dt}}}}}catch(dw){bQ("Exception,  populateAISCustomData"+dw)}}function t(dt,dv){try{var ds=document.createElement("script");ds.setAttribute("src",dt);ds.id=dv;document.getElementsByTagName("head")[0].appendChild(ds)}catch(du){bQ("Exception,  loading JavaScript File "+dt)}}function az(du){try{var ds=document.getElementById(du);ds.parentNode.removeChild(ds)}catch(dt){bQ("Exception,  removing script with id "+du)}}function cS(dt){var du,e;du=dt.akamai;du.pollingTimer=b2(cS,M,[dt]);var ds=Date.now();if(du.chasingSleep>0&&ds>(du.chasingSleep+5000)){aU(dt);du.wasPutToSleep=true}du.chasingSleep=ds;if(dt){if(dt.isBrightcoveVideo){akamaiBCVideoModule.getVideoPosition(false,aw)}else{aw(0,dt)}}}function aU(e){cO();cn.clearBitRate();akamai=e.akamai;if(!e.objectBased&&akamai.pollingTimer){b5(akamai.pollingTimer)}if(cf&&cf.retryTimer){b5(cf.retryTimer)}if(akamai.hLineTimer){b5(akamai.hLineTimer)}if(akamai.fastTCPServerIpTimer){b5(akamai.fastTCPServerIpTimer)}if(akamai.firstPLineTimer){b5(akamai.firstPLineTimer)}if(cf&&cf.retryTimer){b5(cf.retryTimer)}if(akamai.postRollTimer){b5(akamai.postRollTimer);delete akamai.postRollTimer}akamai.currentState.state=cH.ended;akamai.isILineSent=false;akamai.isSLineSent=false;akamai.firstTimePlay=true;akamai.iLineSentTime=0;akamai.lastPlayStreamTime=0}function aw(e,du){var dw,ds;var dv=cb(null,true);if(aJ!=null&&aJ.isBrightcoveVideo){aJ.currentTime=parseInt(e);ds=parseInt(e*1000);du=aJ}else{ds=parseInt(aH(du))}if(ds=="undefined"||isNaN(ds)||ds==""){return}dw=du.akamai;var dt=dw.currentState;if(dt.state==cH.ended){return}if(du.objectBased&&dw.wasPutToSleep===true&&ds===dt.pollingTimerStreamTime){if(dw.pollingTimer){b5(dw.pollingTimer)}ay(aJ);l(aJ)}else{if(du.objectBased){ao(du)}else{if(dt.state==cH.pause||dt.state==cH.seek){return}if((ds!=0)&&(ds===dt.pollingTimerStreamTime)&&(dt.state!=cH.rebuffering)){bQ("check stream head position, call handle waiting event");J(du)}else{dt.pollingTimerStreamTime=ds}}}}function aH(dt){var ds=0;try{if(dt.objectBased){if(cF&&cF.streamHeadPosition){ds=cF.streamHeadPosition();dt.currentTime=ds}}else{if(cr.currentTime){ds=cr.currentTime;dt.currentTime=ds}}}catch(du){}if(ds==0&&aP!=-1){ds=aP}if(ds!=0){aP=ds}return(ds*1000)}function I(ds){var du=0;try{if(ds){if(ds.objectBased){if(cF&&cF.streamLength){du=cF.streamLength();ds.duration=du}}else{du=cr.duration;ds.duration=du}}}catch(dt){}return(du*1000)}function D(dt){var ds="";try{if(dt){if(dt.objectBased){if(cF&&cF.streamURL){ds=cF.streamURL();dt.currentSrc=ds}}else{if(bk.streamURL){ds=bk.streamURL}else{ds=cr.currentSrc;if(ds.indexOf("blob:")===-1){dt.currentSrc=ds}else{ds="";bQ("Call akamaiSetStreamURL() to set streamUrl","Error")}}}}}catch(du){}return ds}function cN(){return aH(aJ)/1000}function dn(){return I(aJ)/1000}function bq(){return D(aJ)}function cl(du){var ds=0,dt=0;try{if(du){if(du.objectBased){if(cF&&cF.bytesLoaded){ds=parseInt(cF.bytesLoaded());dt=ds-du.akamai.lastBytesLoaded}}}}catch(dv){}du.akamai.lastBytesLoaded=ds;if(dt>0){return dt}}function aL(dt){try{var ds={};if(bz!=null){ds=bz();ce(ds)}}catch(du){}}function bB(dt,ds){try{bQ("handle Ad loaded");if(E.isAdLoaded){bQ("handleAdLoaded API is called multiple times.|We have identified that 2 successive handleAdLoaded APIs are called.|Kindly ensure that sequence of Ad calls -- handleAdLoaded->handleAdStarted->handleAdComplete is maintained.","WARN")}var dw=aJ.akamai;if(!dw.isILineSent){var du=new Date().getTime();if(ds!=null&&du-ds>0){}}var dv=cb(ds);E.clearAdAnalytics();E.isAdLoaded=true;E.adLoadTime=dv;E.adCount=1;E.adAbandoned=true;if(dw.postRollTimer){bK(aJ);b5(dw.postRollTimer);dw.postRollAd=true;dw.customDataPopulated=false;E.type=2}else{if(dw.isILineSent){if(dw.isSLineSent){ai(aJ,dv);E.type=1}else{if(!dw.isSLineSent){if(!dw.adLoadTime){dw.adLoadTime=dv}}}}}bC(dt);if(!dw.isILineSent){av(false,dv)}}catch(dx){bQ("Exception,handle ad loaded:"+dx)}}function a1(dt,ds){try{bQ("handle Ad Started");var du=cb(ds);E.isAdStarted=true;if(!E.isAdLoaded){bQ("handleAdLoaded API is missing.|We have identified that handleAdStarted API is called without handleAdLoaded.|Kindly ensure that handleAdLoaded API is called for every Ad and relevant adObject is passed as an argument.","WARN");bB(dt,du)}E.playBucket="0";E.adStartTime=du;E.adStartupTime=du-E.adLoadTime;E.startPos=aH(aJ);bC(dt)}catch(dv){bQ("Exception,handle ad started:"+dv)}}function N(ds){try{bQ("handleAdEnded");if(E.playBucket=="0"){bQ("Ad Progress related APIs not called.|We have identified that handleAdFirstQuartile,handleAdMidPoint & handleAdThirdQuartile APIs have not been called.|It will be good if these APIs are called in order to capture more accurate Ad information","WARN")}E.playBucket="4";cc("0",ds)}catch(dt){bQ("Exception,handle ad completed:"+dt)}}function dc(){if(!E.isAdStarted){bQ("handleAdStarted API is missing.|We have identified that handleAdFirstQuartile API is called without handleAdStarted.|Kindly ensure that handleAdStarted API is called for every Ad that starts successfully.","ERROR")}E.playBucket="1"}function b(){E.playBucket="2"}function cw(){E.playBucket="3"}function o(e){cc("1",e)}function aT(e){cc("3",e)}function bC(dt){try{var du=E.setDataArr;bQ("populate ad metric");for(var ds=0;ds<du.length;ds++){if(du[ds] in dt){E[du[ds]]=dt[du[ds]]}}}catch(dv){}}function cc(dv,ds){try{var dx=cb(ds);var dw=aJ.akamai;E.endStatus=dv;if(dv!="0"){E.adAbandonCount=1}if(E.isAdLoaded&&E.isAdStarted){E.adPlayClockTime=dx-E.adStartTime}E.adSession=aC();var dt=["adStartupTime","adCount","adPlayClockTime","adAbandonCount"];for(var du=0;du<dt.length;du++){dw[dt[du]]+=E[dt[du]]}if(dw.adSession){dw.adSession+=","+E.adSession}else{dw.adSession=E.adSession}E.isAdStarted=false;E.isAdLoaded=false;if(dv!="2"){E.adAbandoned=false;if(dw){if(dw.postRollAd){dw.postRollAd=null;au(aJ,dx)}else{if(dw.isSLineSent){ay(aJ,dx);l(aJ,dx)}else{if(!dw.isSLineSent){dw.adEndTime=dx}}}}}}catch(dy){bQ("Exception,populate ad end:"+dy)}}function aC(){var ds="";var dt=["adId","type","startPos","adStartupTime","adPlayClockTime","playBucket","endStatus","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"];try{for(var du=0;du<dt.length;du++){if((E[dt[du]]==0)||(E[dt[du]]!=null&&E[dt[du]]!="")){ds+=E[dt[du]]+":"}else{ds+=":"}}ds=ds.substring(0,ds.length-1)}catch(dv){}return ds}function a7(ds){try{if(b4(ds)){return}var dt=ds.akamai;if(dt.firstTimeProgress){}}catch(du){}}function aS(ds){try{if(b4(ds)){return}var dt=ds.akamai;if(cr.autoplay){ay(ds);dt.loadStartILine=true}}catch(du){}}function cy(ds){try{if(b4(ds)){return}var dt=ds.akamai;if(cr.autoplay){dt.canPlayEventAutoPlay=true}else{dt.canPlayEventAutoPlay=false}}catch(du){}}function cj(ds){try{if(b4(ds)){return}var dt=ds.akamai;if(dt.firstTimeProgress){dt.firstTimeProgress=false;if(akaMediaAnalytics.getShouldAnalyze()){setTimeout(function(dv){dv.setDiagnoserWindowLoaded(true);dv.processLogs({api:"setConfigXML",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH});var e="";e+=aJ.objectBased===true?"JS-":"HTML5-";e+=b1;dv.processLogs({api:"setCurrentVersion",value:e});dv.processLogs({api:"setCustomDimension",value:Z});dv.processLogs({api:"reportSetupParams",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH});dv.processLogs({api:"reportSetupParams",value:p.beaconUrl.toLowerCase()});dv.processLogs({api:"reportSetupParams",value:m})},3000,akaMediaAnalytics)}}if(dt.logType=="R"){}}catch(du){}}function dr(ds){try{if(b4(ds)){return}var dt=ds.akamai;dt.streamLength=parseInt(I(ds))}catch(du){}}this.subscribeVideoObject=function(ds){try{if(ds){ab(ds)}}catch(dt){}};function ab(dt){bQ("subscribeToEvents : video = "+dt);var ds=["abort","error","play","pause","playing","waiting","seeking","seeked","ended","timeupdate"];var dv=["progress","load","durationchange"];cr=dt;try{dt.addEventListener("play",bW.play=function(){ay(aJ)},false);dt.addEventListener("pause",bW.pause=function(){ai(aJ)},false);dt.addEventListener("error",bW.error=function(){U(aJ)},false);dt.addEventListener("ended",bW.ended=function(){b0(aJ)},false);dt.addEventListener("playing",bW.playing=function(){l(aJ)},false);dt.addEventListener("waiting",bW.waiting=function(){J(aJ)},false);dt.addEventListener("timeupdate",bW.timeupdate=function(){ao(aJ)},false);dt.addEventListener("load",bW.load=function(){a7(aJ)},false);dt.addEventListener("progress",bW.progress=function(){cj(aJ)},false);dt.addEventListener("durationchange",bW.durationchange=function(){dr(aJ)},false);dt.addEventListener("canplay",bW.canplay=function(){cy(aJ)},false);dt.addEventListener("loadstart",bW.loadstart=function(){aS(aJ)},false);bQ("subscribed to events completed")}catch(du){bQ("Exception,  subscribeToEvents,unable to add listeners to video tag :"+du)}}function cR(ds){try{ds.removeEventListener("play",bW.play,false);ds.removeEventListener("pause",bW.pause,false);ds.removeEventListener("error",bW.error,false);ds.removeEventListener("ended",bW.ended,false);ds.removeEventListener("playing",bW.playing,false);ds.removeEventListener("waiting",bW.waiting,false);ds.removeEventListener("timeupdate",bW.timeupdate,false);ds.removeEventListener("load",bW.load,false);ds.removeEventListener("progress",bW.progress,false);ds.removeEventListener("durationchange",bW.durationchange,false);ds.removeEventListener("canplay",bW.canplay,false);ds.removeEventListener("loadstart",bW.loadstart,false)}catch(dt){bQ("Exception, unSubscribeFrom Events:"+dt)}}function bE(du){try{if(typeof(akamaiBCVideoObject)!="undefined"){cr=akamaiBCVideoObject;aJ.isBrightcoveVideo=true;initBrightcove()}else{if(aJ.objectBased||aJ.videoPassed){}else{if(document){var dt=document.getElementsByTagName("video");bQ("add MediaEvent Listeners : videos.length "+dt.length);if(dt&&dt.length==0){dt=document.getElementsByTagName("audio")}for(var ds=0;ds<dt.length;++ds){ab(dt[ds])}document.addEventListener("DOMNodeInserted",aO,false);document.addEventListener("DOMNodeRemoved",aO,false);document.addEventListener("DOMAttrModified",aO,false)}}}if(du){if(du.type=="DOMContentLoaded"){document.removeEventListener("load",bE,true)}else{if(du.type=="load"&&dt&&dt.length>0){document.removeEventListener("load",bE,true)}}}}catch(dv){bQ("Exception,  add MediaEvent Listeners :"+dv)}}function aO(e){var ds=e.target;if(ds.nodeType==ds.COMMENT_NODE||ds.tagName==null||(ds.tagName.toLowerCase()!="video"&&ds.tagName.toLowerCase()!="audio")){return}switch(e.type){case"DOMNodeRemoved":if(ds.dataset&&ds.dataset.isad&&ds.dataset.isad=="true"){}else{c4(aJ,0)}break;case"DOMNodeInserted":ab(ds);break}}function c4(dt,dC){bQ("handle Video Unload");var dw=cb();var dx=dt.akamai;var dv=parseInt(F("HTML_VisitCountCookie"));bp.browserClose=true;try{if(dx&&dx.currentState.state>=cH.init&&dC==0){if(dx.isELineSent||dx.isCLineSent){return}if(E&&E.adAbandoned){var du="Ad.Abandon";if(dx.postRollTimer){b5(dx.postRollTimer);delete dx.postRollTimer}bO(dt,du,true,dw)}else{if(!dx.firstTimePlay){var du="Browser.Close";if(dx.postRollTimer){b5(dx.postRollTimer);delete dx.postRollTimer}bO(dt,du,true,dw)}else{var dB="Browser.Refresh.NoStart";if((dw-dx.startTimer)>p.initBrowserCloseTime){dB="Browser.Refresh.NoStart.Late"}h(dt,dB,true,dw)}}}}catch(dy){}try{var dA=parseInt(F("HTML_LastCLineTime"));var dz=(dA+p.visitTimeout)-dw;var ds=parseInt(F("HTML_isPlayingCount"));bQ("handle Video Unload: playing cookie =  "+ds+", visit cookie :"+dv);if(dv>=1&&dC==1){if(dz>0){b5(dx.clearVisitTimeoutId);dt.akamai.clearVisitTimeoutId=b2(c4,dz,[dt,1]);return}else{if(dz<=0&&dv>1&&ds>0){b5(dx.clearVisitTimeoutId);dt.akamai.clearVisitTimeoutId=b2(c4,p.visitTimeout,[dt,1]);return}}}bQ("handle Video Unload: decrementing HTML_VisitCountCookie");dv=dv-1;bs("HTML_VisitCountCookie",dv);var dv=parseInt(F("HTML_VisitCountCookie"));if(dv===0||isNaN(dv)){if(dx.sendVLine){aq(dt,dw)}}}catch(dy){}}function bd(){try{if(E.isAdLoaded){cc("2")}}catch(ds){}c4(aJ,0)}function di(ds){bQ("handlePagehide");ap=true;bd()}function c8(ds){bQ("handlePageshow:");try{if(aJ&&aJ.tagName){bQ("handlePageShow: media tag is :"+aJ.tagName);if(aJ.akamai&&ap){bQ("handlePageshow: send play and playing on timeupdate");R=true}}}catch(ds){bQ("Exception,  handlePagehsow : "+ds)}ap=false}function F(dt){var ds=dt+"=";var dv="";try{if(document.cookie.length>0){offset=document.cookie.indexOf(ds);if(offset!=-1){offset+=ds.length;end=document.cookie.indexOf(";",offset);if(end==-1){end=document.cookie.length}dv=document.cookie.substring(offset,end)}}}catch(du){}return dv}function Y(ds){try{var dw=location.pathname.split("/");var dv=" path=";document.cookie=ds+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;";for(var dt=0;dt<dw.length;dt++){dv+=((dv.substr(-1)!="/")?"/":"")+dw[dt];document.cookie=ds+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;"+dv+";"}}catch(du){}}function bs(dt,du,dx){try{var ds=dt+"="+du+";Path=/;";if(dx){if(parseInt(dx)>0){var dw=new Date();dw.setDate(dw.getDate()+parseInt(dx));if(dw!=null){ds+="expires="+dw.toUTCString()+";"}}}if(document){document.cookie=ds}}catch(dv){}}function dh(dy,dv){try{if(typeof dy!=="undefined"&&dy!==null&&typeof dv!=="undefined"&&dv!==null){var ds=dy[j(dv.name)];var du=bI.SHA1(ds).toString();var dx=B(du);var dt=0;var dw=cb();if(dx){dt=dw-parseFloat(dx);dt=(dt/1000)/60;dt=(dt>0)?dt.toFixed(2):0}bv(du,dw,dv.expiryDuration);dy[dv.name]=dt.toString()}}catch(dz){bQ("Exception,  calculateUniqueDimension :"+dz)}}function j(e){dimension="";if(e==="viewerInterval"){dimension="viewerId"}else{if(e==="viewerTitleInterval"){dimension="title"}}return dimension}function B(dt){try{var du=window.localStorage.getItem(dt);if(typeof du!=="undefined"&&du!==null){var ds=JSON.parse(du);var dv=ds.value;return dv}}catch(dw){}}function bh(){try{bQ("deleteExpiredDataFromLocalStorage");var dt=cb();var dw=null;var ds=window.localStorage.length;for(var dv=ds-1;dv>=0;dv--){var du=window.localStorage.getItem(window.localStorage.key(dv));if(typeof du!=="undefined"&&du!==null&&du.indexOf("expiryDate")!==-1){var dx=JSON.parse(du);if(typeof dx!=="undefined"&&dx!==null&&typeof dx.expiryDate!=="undefined"&&dx.expiryDate!==null){dw=Date.parse(dx.expiryDate);if(dw<=dt){window.localStorage.removeItem(window.localStorage.key(dv))}}}}}catch(dy){}}function bv(du,dv,dx){try{var dt={value:dv};if(typeof dx!=="undefined"&&dx!==null){var ds=new Date();if(parseInt(dx)>0){ds.setDate(ds.getDate()+parseInt(dx))}else{ds.setDate(ds.getDate()+parseInt(90))}dt.expiryDate=ds.toDateString()}window.localStorage.setItem(du,JSON.stringify(dt))}catch(dw){}}function c6(){try{if(aM=="iPad"||aM=="iPhone"){return true}}catch(ds){return false}}function T(){try{if(aJ.objectBased||aJ.videoPassed){bE()}else{bQ("adding MediaEventListeners: DOMContentLoaded");document.addEventListener("DOMContentLoaded",bE,false);bQ("adding MediaEventListeners: Load");document.addEventListener("load",bE,true)}}catch(ds){bQ("Exception,  Addding DOMContentLoaded and Load event listeners :"+ds)}if(window){if(c6()){window.addEventListener("pagehide",di,false);window.addEventListener("pageshow",c8,false)}else{if(typeof(akamaiBCVideoObject)!="undefined"&&window.addEventListener){window.addEventListener("beforeunload",bd,false)}else{if(window.addEventListener){try{if(bN()){window.parent.addEventListener("beforeunload",bd,false)}else{window.addEventListener("beforeunload",bd,false)}}catch(ds){bQ("Exception, add window document listeners : "+ds);window.addEventListener("beforeunload",bd,false)}}else{if(window.attachEvent){try{if(bN()){window.parent.attachEvent("onbeforeunload",bd)}else{window.attachEvent("onbeforeunload",bd)}}catch(ds){window.attachEvent("onbeforeunload",bd)}}}}}}}T()}if(typeof(akamaiBCVideoObject)!="undefined"){akaMediaAnalytics=new AkaHTML5MediaAnalytics(null)}else{if(typeof(AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH)!="undefined"){if((AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("enableGenericAPI=1")==-1&&AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("subscribeVideo")==-1)){akaMediaAnalytics=new AkaHTML5MediaAnalytics(null)}}}function setAkamaiMediaAnalyticsData(c,d,b){try{if(akaMediaAnalytics){akaMediaAnalytics.setData(c,d);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"setAkamaiMediaAnalyticsData"};a[c]=d;akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}catch(f){}}function akamaiPlaybackCompleted(){try{if(akaMediaAnalytics){akaMediaAnalytics.handlePlayEnd();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiPlaybackCompleted",endReasonCode:endReason};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}catch(b){}}function akamaiGetViewerId(){try{var b=null;if(akaMediaAnalytics){b=akaMediaAnalytics.getViewerId()}}catch(a){}return b}function akamaiSetStreamURL(a,c){try{if(a!=null&&a!=""){setAkamaiMediaAnalyticsData("streamURL",a)}if(akaMediaAnalytics){if(typeof c!=="undefined"){akaMediaAnalytics.enableManifestRequest(c)}else{}}else{}}catch(b){}}function akamaiSetURLManifest(a){try{if(akaMediaAnalytics){akaMediaAnalytics.setURLManifest(a)}else{}}catch(b){}}function akamaiSetViewerId(b){if(b==null||b==""){b="-"}if(akaMediaAnalytics){akaMediaAnalytics.setData("viewerId",b);akaMediaAnalytics.setData("clientId",b);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiSetViewerId"};a.viewerId=b;akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiSetViewerDiagnosticsId(b){if(b==null||b==""){b="-"}if(akaMediaAnalytics){akaMediaAnalytics.setData("viewerDiagnosticsId",b);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiSetViewerDiagnosticsId"};a.viewerDiagnosticsId=b;akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiUpdateAdObject(a){if(akaMediaAnalytics){akaMediaAnalytics.updateAdObject(a)}}function akamaiHandleAdStarted(b){if(akaMediaAnalytics){akaMediaAnalytics.handleAdStarted(b);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleAdStarted",adSetDataObj:b};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleAdCompleted(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdCompleted();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleAdCompleted"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleAdLoaded(b){if(akaMediaAnalytics){akaMediaAnalytics.handleAdLoaded(b);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleAdLoaded",adSetDataObj:b};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleAdFirstQuartile(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdFirstQuartile();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleAdFirstQuartile"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleAdMidPoint(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdMidPoint();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleAdMidPoint"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleAdThirdQuartile(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdThirdQuartile();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleAdThirdQuartile"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleAdError(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdError();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleAdError"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleAdStopped(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdStopped();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleAdStopped"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleStreamSwitch(){if(akaMediaAnalytics){akaMediaAnalytics.handleStreamSwitch();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleStreamSwitch"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleTitleSwitch(b){if(akaMediaAnalytics){akaMediaAnalytics.handleTitleSwitch(b);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleTitleSwitch",customData:b};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiSetupAIS(a,b,c){if(akaMediaAnalytics){akaMediaAnalytics.handleSetupAISEvent(a,b,c)}}function akamaiHandleBitRateSwitch(b){if(akaMediaAnalytics){akaMediaAnalytics.handleBitRateSwitch(b);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleBitRateSwitch",bitRate:b};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiHandleApplicationExit(){if(akaMediaAnalytics){akaMediaAnalytics.handleApplicationExit();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiHandleApplicationExit"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiSetVideoObject(a){if(akaMediaAnalytics){akaMediaAnalytics.subscribeVideoObject(a)}}function akamaiSubscribeVideoObject(a){if(akaMediaAnalytics){akaMediaAnalytics.subscribeVideoObject(a)}}function akamaiEnableLocation(b){if(akaMediaAnalytics){akaMediaAnalytics.enableLocation(b);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiEnableLocation",enable:enable};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}function akamaiDisableServerIpLookup(){try{if(akaMediaAnalytics){akaMediaAnalytics.disableServerIpLookUp();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiDisableServerIpLookup"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}catch(b){}}function akamaiEnableServerIpLookup(){try{if(akaMediaAnalytics){akaMediaAnalytics.enableServerIpLookUp();if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiEnableServerIpLookup"};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}}catch(b){}}function akamaiHandleError(a){try{if(akaMediaAnalytics){akaMediaAnalytics.handleError(a)}}catch(b){}}function fragmentDownloadStarted(a){akamaiFragmentDownloadStarted(a)}function fragmentDownloadCompleted(a){akamaiFragmentDownloadCompleted(a)}function akamaiFragmentDownloadStarted(b){var c=akaMediaAnalytics.getStream();if(!c||!b){return}c.streamFragmentDownloadStarted(b);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiFragmentDownloadStarted",bitRate:b};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}function akamaiFragmentDownloadCompleted(b){var c=akaMediaAnalytics.getStream();if(!c||!b){return}c.streamFragmentDownloadCompleted(b);if(akaMediaAnalytics.getShouldAnalyze()){var a={methodName:"akamaiFragmentDownloadCompleted",bitRate:b};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}};