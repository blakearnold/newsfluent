/*! updated; 04-18-2019 04:12 PM **/


!function(global){var k,_handlers={},_mods={16:!1,18:!1,17:!1,91:!1},_scope="all",_MODIFIERS={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},_MAP={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},code=function(x){return _MAP[x]||x.toUpperCase().charCodeAt(0)},_downKeys=[];for(k=1;k<20;k++)_MAP["f"+k]=111+k;function index(array,item){for(var i=array.length;i--;)if(array[i]===item)return i;return-1}function compareArray(a1,a2){if(a1.length!=a2.length)return!1;for(var i=0;i<a1.length;i++)if(a1[i]!==a2[i])return!1;return!0}var modifierMap={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function updateModifierKey(event){for(k in _mods)_mods[k]=event[modifierMap[k]]}function assignKey(key,scope,method){var keys,mods;keys=getKeys(key),void 0===method&&(method=scope,scope="all");for(var i=0;i<keys.length;i++)mods=[],1<(key=keys[i].split("+")).length&&(mods=getMods(key),key=[key[key.length-1]]),key=key[0],(key=code(key))in _handlers||(_handlers[key]=[]),_handlers[key].push({shortcut:keys[i],scope:scope,method:method,key:keys[i],mods:mods})}for(k in _MODIFIERS)assignKey[k]=!1;function getScope(){return _scope||"all"}function getKeys(key){var keys;return""==(keys=(key=key.replace(/\s/g,"")).split(","))[keys.length-1]&&(keys[keys.length-2]+=","),keys}function getMods(key){for(var mods=key.slice(0,key.length-1),mi=0;mi<mods.length;mi++)mods[mi]=_MODIFIERS[mods[mi]];return mods}function addEvent(object,event,method){object.addEventListener?object.addEventListener(event,method,!1):object.attachEvent&&object.attachEvent("on"+event,function(){method(window.event)})}addEvent(document,"keydown",function(event){!function(event){var key,handler,k,i,modifiersMatch,scope;if(key=event.keyCode,-1==index(_downKeys,key)&&_downKeys.push(key),93!=key&&224!=key||(key=91),key in _mods)for(k in _mods[key]=!0,_MODIFIERS)_MODIFIERS[k]==key&&(assignKey[k]=!0);else if(updateModifierKey(event),assignKey.filter.call(this,event)&&key in _handlers)for(scope=getScope(),i=0;i<_handlers[key].length;i++)if((handler=_handlers[key][i]).scope==scope||"all"==handler.scope){for(k in modifiersMatch=0<handler.mods.length,_mods)(!_mods[k]&&-1<index(handler.mods,+k)||_mods[k]&&-1==index(handler.mods,+k))&&(modifiersMatch=!1);(0!=handler.mods.length||_mods[16]||_mods[18]||_mods[17]||_mods[91])&&!modifiersMatch||!1===handler.method(event,handler)&&(event.preventDefault?event.preventDefault():event.returnValue=!1,event.stopPropagation&&event.stopPropagation(),event.cancelBubble&&(event.cancelBubble=!0))}}(event)}),addEvent(document,"keyup",function(event){var k,key=event.keyCode,i=index(_downKeys,key);if(0<=i&&_downKeys.splice(i,1),93!=key&&224!=key||(key=91),key in _mods)for(k in _mods[key]=!1,_MODIFIERS)_MODIFIERS[k]==key&&(assignKey[k]=!1)}),addEvent(window,"focus",function(){for(k in _mods)_mods[k]=!1;for(k in _MODIFIERS)assignKey[k]=!1});var previousKey=global.key;global.key=assignKey,global.key.setScope=function(scope){_scope=scope||"all"},global.key.getScope=getScope,global.key.deleteScope=function(scope){var key,handlers,i;for(key in _handlers)for(handlers=_handlers[key],i=0;i<handlers.length;)handlers[i].scope===scope?handlers.splice(i,1):i++},global.key.filter=function(event){var tagName=(event.target||event.srcElement).tagName;return!("INPUT"==tagName||"SELECT"==tagName||"TEXTAREA"==tagName)},global.key.isPressed=function(keyCode){return"string"==typeof keyCode&&(keyCode=code(keyCode)),-1!=index(_downKeys,keyCode)},global.key.getPressedKeyCodes=function(){return _downKeys.slice(0)},global.key.noConflict=function(){var k=global.key;return global.key=previousKey,k},global.key.unbind=function(key,scope){var multipleKeys,keys,i,j,obj,mods=[];for(multipleKeys=getKeys(key),j=0;j<multipleKeys.length;j++){if(1<(keys=multipleKeys[j].split("+")).length&&(mods=getMods(keys)),key=keys[keys.length-1],key=code(key),void 0===scope&&(scope=getScope()),!_handlers[key])return;for(i=0;i<_handlers[key].length;i++)(obj=_handlers[key][i]).scope===scope&&compareArray(obj.mods,mods)&&(_handlers[key][i]={})}},"undefined"!=typeof module&&(module.exports=assignKey)}(this);